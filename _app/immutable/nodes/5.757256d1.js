import{s as oe,f as p,g as T,h as C,d as u,j as M,i as F,O as je,z as H,J as xe,o as Ge,P as Ve,a as j,u as Se,c as x,Q as fe,y as b,R as K,M as he,E as $,S as He,l as ee,m as te,L as _e,n as We,T as ue}from"../chunks/scheduler.7d413609.js";import{S as re,i as ie,b as de,d as ge,m as me,a as ve,t as Ee,e as be}from"../chunks/index.47dcfb24.js";import{e as G}from"../chunks/each.30e2cfc0.js";import{_ as Xe}from"../chunks/preload-helper.a4192956.js";function qe(l){let e,s,n;return{c(){e=p("div"),this.h()},l(o){e=T(o,"DIV",{style:!0,class:!0}),C(e).forEach(u),this.h()},h(){M(e,"style",l[0]),M(e,"class","m-0")},m(o,a){F(o,e,a),s||(n=je(l[1].call(null,e)),s=!0)},p(o,[a]){a&1&&M(e,"style",o[0])},i:H,o:H,d(o){o&&u(e),s=!1,n()}}}function Je(l,e){return e.forEach(([s,n])=>l[s]=n),l}function Qe(l,e,s){let{target:n=void 0}=e,{sketch:o=void 0}=e,{parentDivStyle:a="display: block;"}=e,{debug:f=!1}=e,B;const D=xe(),S={ref(){D("ref",n)},instance(){D("instance",B)}};function y(k){return s(2,n=k),{destroy(){s(2,n=void 0)}}}return Ge(async()=>{const k=await Xe(()=>import("../chunks/p5.min.4f4d612a.js").then(h=>h.p),["../chunks/p5.min.4f4d612a.js","../chunks/_commonjsHelpers.725317a4.js"],import.meta.url),{default:i}=k,g=Object.entries(k).filter(([h,m])=>m instanceof Function&&h[0]!=="_"&&h!=="default");f&&console.log("available p5 native classes",g),B=new i(h=>(h=Je(h,g),f&&console.log("p5 instance",h),window._p5Instance=h,o(h)),n),S.ref(),S.instance()}),l.$$set=k=>{"target"in k&&s(2,n=k.target),"sketch"in k&&s(3,o=k.sketch),"parentDivStyle"in k&&s(0,a=k.parentDivStyle),"debug"in k&&s(4,f=k.debug)},[a,y,n,o,f]}class Ue extends re{constructor(e){super(),ie(this,e,Qe,qe,oe,{target:2,sketch:3,parentDivStyle:0,debug:4})}}function Ye(l){let e,s,n;return s=new Ue({props:{sketch:l[0]}}),{c(){e=p("div"),de(s.$$.fragment),this.h()},l(o){e=T(o,"DIV",{class:!0});var a=C(e);ge(s.$$.fragment,a),a.forEach(u),this.h()},h(){M(e,"class","d-flex justify-content-center")},m(o,a){F(o,e,a),me(s,e,null),n=!0},p:H,i(o){n||(ve(s.$$.fragment,o),n=!0)},o(o){Ee(s.$$.fragment,o),n=!1},d(o){o&&u(e),be(s)}}}const Ce=15,Z=30;function Ke(l,e,s){let n,{notesToDisplay:o}=e;const a=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],f=["E","A","D","G","B","E"],B=f.map(i=>{const _=a.indexOf(i);if(_===-1)throw new Error(`Base ${i} not found`);const g=[i];for(let h=1;h<Ce;h++){const m=a[(_+h)%a.length];g.push(m)}return g}),D=i=>{const _=[80,70,60,150],g=i.height/6;for(let v=0;v<B.length;v++){const I=f[v],E=g*v+g/2;i.strokeWeight(1),i.stroke(_),i.noFill(),i.line(Z,E,i.width,E),i.noStroke(),i.fill(_),i.text(I,5,i.height-E+i.textSize()/2)}i.strokeWeight(5),i.stroke(_),i.noFill(),i.line(Z,g/2,Z,i.height-g/2),i.strokeWeight(1);const h=i.width/B[0].length;for(let v=1;v<Ce;v++){const I=Z+h*v;i.line(I,g/2,I,i.height-g/2)}const m=[3,5,7,9,15];for(const v of m){let{x:I,y:E}=y({string:2,fret:v});E-=g/2,i.fill(_),i.circle(I,E,10)}const R=[1,3];for(const v of R){let{x:I,y:E}=y({string:v,fret:12});E-=g/2,i.fill(_),i.circle(I,E,10)}},S=i=>{for(let _=0;_<6;_++){const g=B[_];for(let h=0;h<g.length;h++){const m=g[h];if(!o.includes(m))continue;const R={string:_,fret:h},{x:v,y:I}=y(R);o.indexOf(m)===0?i.fill([250,80,80]):i.fill("black"),i.circle(v,I,20),i.noStroke(),i.fill("white"),i.text(m,v-i.textWidth(m)/2,I+i.textSize()/2)}}},y=i=>{const{string:_,fret:g}=i,h=n.height/6,m=h*(5-_)+h/2;if(g===0)return{x:Z,y:m};const R=n.width/B[0].length;return{x:Z+R*(g-1)+R*.5,y:m}},k=i=>{i.setup=()=>{n=i,i.createCanvas(900,300)},i.draw=()=>{i.background([200,190,170]),D(i),S(i)}};return Ve(()=>{n==null||n.remove()}),l.$$set=i=>{"notesToDisplay"in i&&s(1,o=i.notesToDisplay)},[k,o]}class Ze extends re{constructor(e){super(),ie(this,e,Ke,Ye,oe,{notesToDisplay:1})}}const $e=l=>{if(l<1||l>7)throw new Error(`Unkown degree ${l}`);return["I","II","III","IV","V","VI","VII"][l-1]};function Oe(l,e,s){const n=l.slice();return n[11]=e[s],n}function ze(l,e,s){const n=l.slice();return n[14]=e[s],n[16]=s,n}function Le(l,e,s){const n=l.slice();return n[2]=e[s],n}function Ne(l,e,s){const n=l.slice();return n[1]=e[s],n}function Pe(l,e,s){const n=l.slice();return n[11]=e[s],n}function Ae(l){let e,s=l[11]+"",n,o;return{c(){e=p("option"),n=ee(s),o=j(),this.h()},l(a){e=T(a,"OPTION",{});var f=C(e);n=te(f,s),o=x(f),f.forEach(u),this.h()},h(){e.__value=l[11],_e(e,e.__value)},m(a,f){F(a,e,f),b(e,n),b(e,o)},p:H,d(a){a&&u(e)}}}function Be(l){let e,s=l[1].name+"",n,o;return{c(){e=p("option"),n=ee(s),o=j(),this.h()},l(a){e=T(a,"OPTION",{});var f=C(e);n=te(f,s),o=x(f),f.forEach(u),this.h()},h(){e.__value=l[1],_e(e,e.__value)},m(a,f){F(a,e,f),b(e,n),b(e,o)},p:H,d(a){a&&u(e)}}}function Fe(l){let e,s=l[2].name+"",n,o;return{c(){e=p("option"),n=ee(s),o=j(),this.h()},l(a){e=T(a,"OPTION",{});var f=C(e);n=te(f,s),o=x(f),f.forEach(u),this.h()},h(){e.__value=l[2],_e(e,e.__value)},m(a,f){F(a,e,f),b(e,n),b(e,o)},p:H,d(a){a&&u(e)}}}function Re(l){let e,s=$e(l[16]+1)+"",n;return{c(){e=p("th"),n=ee(s),this.h()},l(o){e=T(o,"TH",{class:!0});var a=C(e);n=te(a,s),a.forEach(u),this.h()},h(){M(e,"class","svelte-14ztni8")},m(o,a){F(o,e,a),b(e,n)},p:H,d(o){o&&u(e)}}}function Me(l){let e,s=l[11]+"",n;return{c(){e=p("td"),n=ee(s),this.h()},l(o){e=T(o,"TD",{class:!0});var a=C(e);n=te(a,s),a.forEach(u),this.h()},h(){M(e,"class","svelte-14ztni8")},m(o,a){F(o,e,a),b(e,n)},p(o,a){a&8&&s!==(s=o[11]+"")&&We(n,s)},d(o){o&&u(e)}}}function et(l){let e,s="Scales",n,o,a,f='<th class="svelte-14ztni8"><label for="tonicInput">Tonic</label></th> <th class="svelte-14ztni8"><label for="scaleInput">Scale</label></th> <th class="svelte-14ztni8"><label for="modeInput">mode</label></th>',B,D,S,y,k,i,_,g,h,m,R,v,I,E,W,ae,X,ne,V,le,ce,ke,q=G(l[4]),O=[];for(let t=0;t<q.length;t+=1)O[t]=Ae(Pe(l,q,t));let J=G(l[5]),z=[];for(let t=0;t<J.length;t+=1)z[t]=Be(Ne(l,J,t));let Q=G(l[6]),L=[];for(let t=0;t<Q.length;t+=1)L[t]=Fe(Le(l,Q,t));let U=G(l[3]),N=[];for(let t=0;t<U.length;t+=1)N[t]=Re(ze(l,U,t));let Y=G(l[3]),P=[];for(let t=0;t<Y.length;t+=1)P[t]=Me(Oe(l,Y,t));return V=new Ze({props:{notesToDisplay:l[3]}}),{c(){e=p("h2"),e.textContent=s,n=j(),o=p("table"),a=p("tr"),a.innerHTML=f,B=j(),D=p("tr"),S=p("td"),y=p("select");for(let t=0;t<O.length;t+=1)O[t].c();k=j(),i=p("td"),_=p("select");for(let t=0;t<z.length;t+=1)z[t].c();g=j(),h=p("td"),m=p("select");for(let t=0;t<L.length;t+=1)L[t].c();R=j(),v=p("br"),I=j(),E=p("table"),W=p("tr");for(let t=0;t<N.length;t+=1)N[t].c();ae=j(),X=p("tr");for(let t=0;t<P.length;t+=1)P[t].c();ne=j(),de(V.$$.fragment),this.h()},l(t){e=T(t,"H2",{"data-svelte-h":!0}),Se(e)!=="svelte-b2sc71"&&(e.textContent=s),n=x(t),o=T(t,"TABLE",{});var d=C(o);a=T(d,"TR",{"data-svelte-h":!0}),Se(a)!=="svelte-allvrg"&&(a.innerHTML=f),B=x(d),D=T(d,"TR",{});var c=C(D);S=T(c,"TD",{class:!0});var r=C(S);y=T(r,"SELECT",{id:!0});var A=C(y);for(let w=0;w<O.length;w+=1)O[w].l(A);A.forEach(u),r.forEach(u),k=x(c),i=T(c,"TD",{class:!0});var pe=C(i);_=T(pe,"SELECT",{id:!0});var Te=C(_);for(let w=0;w<z.length;w+=1)z[w].l(Te);Te.forEach(u),pe.forEach(u),g=x(c),h=T(c,"TD",{class:!0});var Ie=C(h);m=T(Ie,"SELECT",{id:!0});var De=C(m);for(let w=0;w<L.length;w+=1)L[w].l(De);De.forEach(u),Ie.forEach(u),c.forEach(u),d.forEach(u),R=x(t),v=T(t,"BR",{}),I=x(t),E=T(t,"TABLE",{});var se=C(E);W=T(se,"TR",{});var ye=C(W);for(let w=0;w<N.length;w+=1)N[w].l(ye);ye.forEach(u),ae=x(se),X=T(se,"TR",{});var we=C(X);for(let w=0;w<P.length;w+=1)P[w].l(we);we.forEach(u),se.forEach(u),ne=x(t),ge(V.$$.fragment,t),this.h()},h(){M(y,"id","tonicInput"),l[0]===void 0&&fe(()=>l[7].call(y)),M(S,"class","svelte-14ztni8"),M(_,"id","scaleInput"),l[1]===void 0&&fe(()=>l[8].call(_)),M(i,"class","svelte-14ztni8"),M(m,"id","modeInput"),l[2]===void 0&&fe(()=>l[9].call(m)),M(h,"class","svelte-14ztni8")},m(t,d){F(t,e,d),F(t,n,d),F(t,o,d),b(o,a),b(o,B),b(o,D),b(D,S),b(S,y);for(let c=0;c<O.length;c+=1)O[c]&&O[c].m(y,null);K(y,l[0],!0),b(D,k),b(D,i),b(i,_);for(let c=0;c<z.length;c+=1)z[c]&&z[c].m(_,null);K(_,l[1],!0),b(D,g),b(D,h),b(h,m);for(let c=0;c<L.length;c+=1)L[c]&&L[c].m(m,null);K(m,l[2],!0),F(t,R,d),F(t,v,d),F(t,I,d),F(t,E,d),b(E,W);for(let c=0;c<N.length;c+=1)N[c]&&N[c].m(W,null);b(E,ae),b(E,X);for(let c=0;c<P.length;c+=1)P[c]&&P[c].m(X,null);F(t,ne,d),me(V,t,d),le=!0,ce||(ke=[he(y,"change",l[7]),he(_,"change",l[8]),he(m,"change",l[9])],ce=!0)},p(t,[d]){if(d&16){q=G(t[4]);let r;for(r=0;r<q.length;r+=1){const A=Pe(t,q,r);O[r]?O[r].p(A,d):(O[r]=Ae(A),O[r].c(),O[r].m(y,null))}for(;r<O.length;r+=1)O[r].d(1);O.length=q.length}if(d&17&&K(y,t[0]),d&32){J=G(t[5]);let r;for(r=0;r<J.length;r+=1){const A=Ne(t,J,r);z[r]?z[r].p(A,d):(z[r]=Be(A),z[r].c(),z[r].m(_,null))}for(;r<z.length;r+=1)z[r].d(1);z.length=J.length}if(d&34&&K(_,t[1]),d&64){Q=G(t[6]);let r;for(r=0;r<Q.length;r+=1){const A=Le(t,Q,r);L[r]?L[r].p(A,d):(L[r]=Fe(A),L[r].c(),L[r].m(m,null))}for(;r<L.length;r+=1)L[r].d(1);L.length=Q.length}if(d&68&&K(m,t[2]),d&8){U=G(t[3]);let r;for(r=0;r<U.length;r+=1){const A=ze(t,U,r);N[r]?N[r].p(A,d):(N[r]=Re(A),N[r].c(),N[r].m(W,null))}for(;r<N.length;r+=1)N[r].d(1);N.length=U.length}if(d&8){Y=G(t[3]);let r;for(r=0;r<Y.length;r+=1){const A=Oe(t,Y,r);P[r]?P[r].p(A,d):(P[r]=Me(A),P[r].c(),P[r].m(X,null))}for(;r<P.length;r+=1)P[r].d(1);P.length=Y.length}const c={};d&8&&(c.notesToDisplay=t[3]),V.$set(c)},i(t){le||(ve(V.$$.fragment,t),le=!0)},o(t){Ee(V.$$.fragment,t),le=!1},d(t){t&&(u(e),u(n),u(o),u(R),u(v),u(I),u(E),u(ne)),$(O,t),$(z,t),$(L,t),$(N,t),$(P,t),be(V,t),ce=!1,He(ke)}}}function tt(l,e,s){const n=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],o=[{name:"Major",intervals:[2,2,1,2,2,2,1]},{name:"Natural minor",intervals:[2,1,2,2,1,2,2]},{name:"Pentatonic major",intervals:[2,2,3,2,3]},{name:"Pentatonic minor",intervals:[3,2,2,3,2]}],a=[{name:"Ionian",degree:1},{name:"Dorian",degree:2},{name:"Phrygian",degree:3},{name:"Lydian",degree:4},{name:"Mixolydian",degree:5},{name:"Aeolian",degree:6},{name:"Locrian",degree:7}];let f="C",B=o[0],D=a[0],S=[];const y=(g,h,m)=>{const{intervals:R}=h;s(3,S=[g]);const v=n.indexOf(g);if(v===-1)throw new Error(`Tonic ${g} not found`);let I=v;for(const E of R)I=(I+E)%n.length,S.push(n[I]);S.pop();for(let E=1;E<m.degree;E++)S.push(S.shift())};function k(){f=ue(this),s(0,f),s(4,n)}function i(){B=ue(this),s(1,B),s(5,o)}function _(){D=ue(this),s(2,D),s(6,a)}return l.$$.update=()=>{l.$$.dirty&7&&y(f,B,D)},[f,B,D,S,n,o,a,k,i,_]}class nt extends re{constructor(e){super(),ie(this,e,tt,et,oe,{})}}function lt(l){let e,s;return e=new nt({}),{c(){de(e.$$.fragment)},l(n){ge(e.$$.fragment,n)},m(n,o){me(e,n,o),s=!0},p:H,i(n){s||(ve(e.$$.fragment,n),s=!0)},o(n){Ee(e.$$.fragment,n),s=!1},d(n){be(e,n)}}}class at extends re{constructor(e){super(),ie(this,e,null,lt,oe,{})}}export{at as component};
