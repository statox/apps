import{s as tt,f as _,a as A,l as K,g as R,u as G,c as O,h as V,d as u,m as Q,j as $,i as S,y as k,B as j,z as et,C as mt,D as ht}from"../chunks/scheduler.340eebe2.js";import{S as ot,i as nt,b as it,d as rt,m as st,a as at,t as lt,e as ct}from"../chunks/index.ff53592b.js";import{P as dt}from"../chunks/P5.79aadd34.js";const q=Math.PI,p={scale:1,position:0,outerRing:{labels:["B°","F♯°","C♯°","G♯°","D♯°","A♯°","F°","C°","G°","D°","A°","E°"],cellSize:2*q/48,ratio:4,innerDiameter:.82,outerDiameter:1},middleRing:{labels:["Em","Am","Bm","Em","F♯m","Bm","C♯m","F♯m","G♯m","C♯m","D♯m","G♯m","A♯m","E♭m","Fm","B♭m","Cm","Fm","Gm","Cm","Dm","Gm","Am","Dm"],cellSize:2*q/24,ratio:1,innerDiameter:.6,outerDiameter:.82},innerRing:{labels:["C","G","D","A","F♭/E","C♭/B","G♭/F♯","D♭/C♯","A♭/G♯","E♭","B♭","F"],cellSize:2*q/12,ratio:1,innerDiameter:.35,outerDiameter:.6}},T=(t,o)=>{if(t>=0)return t%o;for(;t<0;)t+=o;return t},U=(t,o,n,i,a)=>{if(n<0||n>=o.labels.length)throw new Error(`OOB labelIndex: ${n}`);const{cellSize:l,innerDiameter:c,outerDiameter:s,ratio:x}=o,r=t.createVector();r.x=0,r.y=-s/2;const f=n*l*x;r.rotate(f);const e=l/2,y=[r.copy().rotate(-e).setMag(c),r.copy().rotate(-e).setMag(s),r.copy().setMag(s*1.02),r.copy().rotate(e).setMag(s),r.copy().rotate(e).setMag(c),r.copy().setMag(c*1.02)].map(v=>v.mult(a)),d=r.copy().setMag(c+(s-c)/2).mult(a),m=T(n+i,o.labels.length)*360/o.labels.length;return{vertices:y,center:d,label:o.labels[n],color:`hsb(${m}, 50%, 80%)`,colorHue:m}},X=(t,o)=>{const{scale:n}=o,i=o.innerRing.labels.map((c,s)=>U(t,o.innerRing,s,o.position,n)),a=o.middleRing.labels.map((c,s)=>U(t,o.middleRing,s,o.position*2,n)),l=o.outerRing.labels.map((c,s)=>U(t,o.outerRing,s,o.position,n));return{tilesInnerRing:i,tilesMiddleRing:a,tilesOuterRing:l}},Y=(t,o)=>{t.strokeWeight(2),t.stroke([0,0,0,.5]),t.fill(`hsb(${o.colorHue}, 50%, 70%)`);const[n,i,a,l,c,s]=o.vertices;t.beginShape(),t.vertex(n.x,n.y),t.vertex(i.x,i.y),t.quadraticVertex(a.x,a.y,l.x,l.y),t.vertex(l.x,l.y),t.vertex(c.x,c.y),t.quadraticVertex(s.x,s.y,n.x,n.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),t.text(o.label,o.center.x-t.textWidth(o.label)/2,o.center.y)},ut=(t,o,n,i,a)=>{const l=[n[T(o-1,n.length)],n[T(o,n.length)],n[T(o+1,n.length)],i[T(2*o-1,i.length)],i[T(2*o,i.length)],i[T(2*o+1,i.length)],a[T(o,a.length)]];for(const c of l){t.strokeWeight(3),t.stroke([0,0,0,1]),t.fill(`hsb(${c.colorHue}, 60%, 90%)`);const[s,x,r,f,e,y]=c.vertices;t.beginShape(),t.vertex(s.x,s.y),t.vertex(x.x,x.y),t.quadraticVertex(r.x,r.y,f.x,f.y),t.vertex(f.x,f.y),t.vertex(e.x,e.y),t.quadraticVertex(y.x,y.y,s.x,s.y),t.endShape(),t.noStroke(),t.fill(0),t.textSize(13),t.textStyle(t.BOLD),t.text(c.label,c.center.x-t.textWidth(c.label)/2,c.center.y),t.textStyle(t.NORMAL)}},xt=(t,o,n)=>{const{scale:i}=n;t.textSize(10),t.push(),t.rotate(o*(2*t.PI/12)),t.fill(250),t.circle(0,0,n.innerRing.innerDiameter*2*i),t.fill(0);const a=t.createVector();a.x=0,a.y=-n.innerRing.innerDiameter*i;const l="▲";t.text(l,a.x-t.textWidth(l)/2,a.y*.9);const c="Key";t.text(c,a.x-t.textWidth(c)/2,a.y*.75);const s=t.createVector(),x=["♯","♯♯","♯♯♯","♯♯♯♯","7♭/5♯","6♭/6♯","5♭/7♯","♭♭♭♭","♭♭♭","♭♭","♭"];s.y=-n.innerRing.innerDiameter*.85*i,t.push();for(const z of x)t.rotate(2*t.PI/12),t.text(z,-t.textWidth(z)/2,s.y);t.pop();const r=t.createVector();r.y=-n.innerRing.innerDiameter*1.04*i;const f="I";t.text(f,r.x-t.textWidth(f)/2,r.y);const e=t.createVector();e.y=-n.innerRing.outerDiameter*.9*i;const y="maj7,maj9";t.text(y,e.x-t.textWidth(y)/2,e.y),t.push(),t.rotate(-(2*t.PI)/12);const d="IV";t.text(d,r.x-t.textWidth(d)/2,r.y);const m="maj7,maj9";t.text(m,e.x-t.textWidth(m)/2,e.y),t.pop(),t.push(),t.rotate(2*t.PI/12);const v="V";t.text(v,r.x-t.textWidth(v)/2,r.y);const g="7,9,11,sus4,13";t.text(g,e.x-t.textWidth(g)/2,e.y),t.pop(),r.y=-n.middleRing.innerDiameter*1.02*i,e.y=-n.middleRing.outerDiameter*.95*i;const C="III";t.text(C,r.x-t.textWidth(C)/2,r.y);const I="m7";t.text(I,e.x-t.textWidth(I)/2,e.y),t.push(),t.rotate(-(2*t.PI)/24);const B="II";t.text(B,r.x-t.textWidth(B)/2,r.y);const M="m7,m9";t.text(M,e.x-t.textWidth(M)/2,e.y),t.pop(),t.push();const W="V I";t.rotate(2*t.PI/24),t.text(W,r.x-t.textWidth(W)/2,r.y);const w="m7,m9";t.text(w,e.x-t.textWidth(w)/2,e.y),t.pop();const P="V II°";r.y=-n.outerRing.innerDiameter*1.015*i,e.y=-n.outerRing.outerDiameter*.96*i,t.text(P,r.x-t.textWidth(P)/2,r.y);const D="m7♭5";t.text(D,e.x-t.textWidth(D)/2,e.y)},Z=(t,o)=>{if(o){t.position--,t.innerRing.labels.unshift(t.innerRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.middleRing.labels.unshift(t.middleRing.labels.pop()),t.outerRing.labels.unshift(t.outerRing.labels.pop());return}t.position++,t.innerRing.labels.push(t.innerRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.middleRing.labels.push(t.middleRing.labels.shift()),t.outerRing.labels.push(t.outerRing.labels.shift())};function ft(t){let o,n="Chord wheel",i,a,l,c,s,x,r,f,e,y,d,m,v,g,C,I,B="On mobile you can also swipe left/right to rotate the shape and up/down to rotate the wheel",M,W,w=`This page is an implementation of <a href="https://chordwheel.com/" target="_blank" rel="noopener noreferrer">Jim Fleser&#39;s Chord Wheel</a>
    it is intended for my personal use. If you are using this implementation you should definitely
    <a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=4" target="_blank" rel="noopener noreferrer">buy his book</a> or
    <a href="https://apps.apple.com/us/app/the-chord-wheel/id444931977" target="_blank" rel="noopener noreferrer">buy his app</a> (which is much more complete than this page).`,P,D,z=`This tool only works for songs in major keys. 
    <ul><li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=5&amp;Itemid=17" target="_blank" rel="noopener noreferrer">Analyzing songs and compositional styles</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=8:soloing-and-improvisation&amp;catid=8:using-the-chordwheel&amp;Itemid=8" target="_blank" rel="noopener noreferrer">Soloing and improvisation</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=9&amp;Itemid=5" target="_blank" rel="noopener noreferrer">Transpositions</a></li></ul>`,F,N,J;return l=new dt({props:{sketch:t[3]}}),{c(){o=_("h3"),o.textContent=n,i=A(),a=_("div"),it(l.$$.fragment),c=A(),s=_("div"),x=_("p"),r=_("button"),f=K(`
        Shape rotation
        `),e=_("button"),y=A(),d=_("p"),m=_("button"),v=K(`
        Wheel rotation
        `),g=_("button"),C=A(),I=_("p"),I.textContent=B,M=A(),W=_("div"),W.innerHTML=w,P=A(),D=_("div"),D.innerHTML=z,this.h()},l(h){o=R(h,"H3",{"data-svelte-h":!0}),G(o)!=="svelte-11nfyxx"&&(o.textContent=n),i=O(h),a=R(h,"DIV",{class:!0});var b=V(a);rt(l.$$.fragment,b),b.forEach(u),c=O(h),s=R(h,"DIV",{class:!0});var E=V(s);x=R(E,"P",{});var H=V(x);r=R(H,"BUTTON",{class:!0}),V(r).forEach(u),f=Q(H,`
        Shape rotation
        `),e=R(H,"BUTTON",{class:!0}),V(e).forEach(u),H.forEach(u),y=O(E),d=R(E,"P",{});var L=V(d);m=R(L,"BUTTON",{class:!0}),V(m).forEach(u),v=Q(L,`
        Wheel rotation
        `),g=R(L,"BUTTON",{class:!0}),V(g).forEach(u),L.forEach(u),C=O(E),I=R(E,"P",{"data-svelte-h":!0}),G(I)!=="svelte-98i1j2"&&(I.textContent=B),E.forEach(u),M=O(h),W=R(h,"DIV",{"data-svelte-h":!0}),G(W)!=="svelte-1do95hk"&&(W.innerHTML=w),P=O(h),D=R(h,"DIV",{"data-svelte-h":!0}),G(D)!=="svelte-gtbrys"&&(D.innerHTML=z),this.h()},h(){$(a,"class","d-flex justify-content-center svelte-1vtu5u7"),$(r,"class","fa fa-undo"),$(e,"class","fa fa-repeat"),$(m,"class","fa fa-undo"),$(g,"class","fa fa-repeat"),$(s,"class","justify-content-center svelte-1vtu5u7")},m(h,b){S(h,o,b),S(h,i,b),S(h,a,b),st(l,a,null),S(h,c,b),S(h,s,b),k(s,x),k(x,r),k(x,f),k(x,e),k(s,y),k(s,d),k(d,m),k(d,v),k(d,g),k(s,C),k(s,I),S(h,M,b),S(h,W,b),S(h,P,b),S(h,D,b),F=!0,N||(J=[j(r,"click",t[4]),j(e,"click",t[5]),j(m,"click",t[2]),j(g,"click",t[1])],N=!0)},p:et,i(h){F||(at(l.$$.fragment,h),F=!0)},o(h){lt(l.$$.fragment,h),F=!1},d(h){h&&(u(o),u(i),u(a),u(c),u(s),u(M),u(W),u(P),u(D)),ct(l),N=!1,mt(J)}}}function yt(t,o,n){let i,a,l=0;const c=()=>{Z(p,!0),a=X(i,p)},s=()=>{Z(p,!1),a=X(i,p)},x=e=>{function y(){const m=Math.min(e.windowWidth,e.windowHeight);e.resizeCanvas(m*.8,m*.8),p.scale=m/2*.75,a=X(e,p)}e.setup=()=>{i=e,e.createCanvas(100,100),y(),e.colorMode(e.HSB)},e.draw=()=>{e.background(50),e.translate(e.width/2,e.height/2),a.tilesInnerRing.forEach(m=>Y(e,m)),a.tilesMiddleRing.forEach(m=>Y(e,m)),a.tilesOuterRing.forEach(m=>Y(e,m)),ut(e,l,a.tilesInnerRing,a.tilesMiddleRing,a.tilesOuterRing),xt(e,l,p)},e.keyPressed=()=>{e.keyCode===e.LEFT_ARROW&&n(0,l--,l),e.keyCode===e.RIGHT_ARROW&&n(0,l++,l),e.keyCode===e.UP_ARROW&&s(),e.keyCode===e.DOWN_ARROW&&c()};let d;e.touchStarted=()=>{d={x:e.mouseX,y:e.mouseY}},e.touchMoved=()=>{if(!d)return;const m=e.mouseX-d.x,v=e.mouseY-d.y,g=Math.abs(m),C=Math.abs(v);g<50&&C<50||(g>C?m<0?n(0,l--,l):n(0,l++,l):v>0?c():s(),d={x:e.mouseX,y:e.mouseY})},e.windowResized=()=>{y()}};return ht(()=>{i==null||i.remove()}),[l,c,s,x,()=>n(0,l-=1),()=>n(0,l+=1)]}class gt extends ot{constructor(o){super(),nt(this,o,yt,ft,tt,{})}}function bt(t){let o,n;return o=new gt({}),{c(){it(o.$$.fragment)},l(i){rt(o.$$.fragment,i)},m(i,a){st(o,i,a),n=!0},p:et,i(i){n||(at(o.$$.fragment,i),n=!0)},o(i){lt(o.$$.fragment,i),n=!1},d(i){ct(o,i)}}}class It extends ot{constructor(o){super(),nt(this,o,null,bt,tt,{})}}export{It as component};
