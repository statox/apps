import{s as H,f as _,g as y,h as B,d as g,j as b,i as P,A as U,F as ie,a as C,B as I,c as A,D as m,N as ce,l as N,m as L,G as $,C as x,n as ae,E as he}from"../chunks/scheduler.2091c757.js";import{S as J,i as Q,b as j,d as z,m as F,a as G,t as O,e as W}from"../chunks/index.91be552e.js";import{P as de}from"../chunks/P5.a4dbd00b.js";import{e as le}from"../chunks/each.30e0811f.js";import{T as ue}from"../chunks/TapTempo.075bf580.js";function me(o){let e,r,n;return r=new de({props:{sketch:o[0]}}),{c(){e=_("div"),j(r.$$.fragment),this.h()},l(a){e=y(a,"DIV",{id:!0,class:!0});var i=B(e);z(r.$$.fragment,i),i.forEach(g),this.h()},h(){b(e,"id","canvas-container"),b(e,"class","d-flex justify-content-center")},m(a,i){P(a,e,i),F(r,e,null),n=!0},p:U,i(a){n||(G(r.$$.fragment,a),n=!0)},o(a){O(r.$$.fragment,a),n=!1},d(a){a&&g(e),W(r)}}}function fe(o,e,r){let n,{keptDuration:a}=e,{taps:i}=e,{pause:v}=e;const h=s=>{s.setup=()=>{r(4,n=s),s.createCanvas(600,100)},s.draw=()=>{const u=document.getElementById("canvas-container");if(u){const t=(u==null?void 0:u.clientWidth)||600;s.width!==t&&s.resizeCanvas(t,100);const l=getComputedStyle(document.body),d=l.getPropertyValue("--nc-bg-2")||"white",c=l.getPropertyValue("--nc-tx-1")||"black";s.background(d),s.stroke(c)}const k=Date.now(),w=k-a;for(const t of i){const l=s.map(t,k,w,s.width,0);s.line(l,0,l,s.height)}}};return ie(()=>{n==null||n.remove()}),o.$$set=s=>{"keptDuration"in s&&r(1,a=s.keptDuration),"taps"in s&&r(2,i=s.taps),"pause"in s&&r(3,v=s.pause)},o.$$.update=()=>{o.$$.dirty&24&&(v?n==null||n.noLoop():n==null||n.loop())},[h,a,i,v,n]}class pe extends J{constructor(e){super(),Q(this,e,fe,me,H,{keptDuration:1,taps:2,pause:3})}}function oe(o,e,r){const n=o.slice();return n[4]=e[r],n}function re(o){let e,r=o[3](o[4])+"",n,a,i,v=o[4].name+"",h,s,u,k=o[4].description+"",w;return{c(){e=_("span"),n=N(r),a=C(),i=_("span"),h=N(v),s=C(),u=_("span"),w=N(k),this.h()},l(t){e=y(t,"SPAN",{class:!0});var l=B(e);n=L(l,r),l.forEach(g),a=A(t),i=y(t,"SPAN",{class:!0});var d=B(i);h=L(d,v),d.forEach(g),s=A(t),u=y(t,"SPAN",{class:!0});var c=B(u);w=L(c,k),c.forEach(g),this.h()},h(){b(e,"class","col svelte-1kxd0qm"),$(e,"selected",o[2](o[0],o[4])),b(i,"class","col svelte-1kxd0qm"),$(i,"selected",o[2](o[0],o[4])),b(u,"class","col svelte-1kxd0qm"),$(u,"selected",o[2](o[0],o[4]))},m(t,l){P(t,e,l),m(e,n),P(t,a,l),P(t,i,l),m(i,h),P(t,s,l),P(t,u,l),m(u,w)},p(t,l){l&7&&$(e,"selected",t[2](t[0],t[4])),l&7&&$(i,"selected",t[2](t[0],t[4])),l&7&&$(u,"selected",t[2](t[0],t[4]))},d(t){t&&(g(e),g(a),g(i),g(s),g(u))}}}function ge(o){let e,r,n="BPM",a,i,v="Tempo",h,s,u="Description",k,w=le(o[1]),t=[];for(let l=0;l<w.length;l+=1)t[l]=re(oe(o,w,l));return{c(){e=_("div"),r=_("span"),r.textContent=n,a=C(),i=_("span"),i.textContent=v,h=C(),s=_("span"),s.textContent=u,k=C();for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=y(l,"DIV",{class:!0});var d=B(e);r=y(d,"SPAN",{class:!0,"data-svelte-h":!0}),I(r)!=="svelte-cdp0q5"&&(r.textContent=n),a=A(d),i=y(d,"SPAN",{class:!0,"data-svelte-h":!0}),I(i)!=="svelte-1lklpwv"&&(i.textContent=v),h=A(d),s=y(d,"SPAN",{class:!0,"data-svelte-h":!0}),I(s)!=="svelte-df2g4a"&&(s.textContent=u),k=A(d);for(let c=0;c<t.length;c+=1)t[c].l(d);d.forEach(g),this.h()},h(){b(r,"class","col table-head svelte-1kxd0qm"),b(i,"class","col table-head svelte-1kxd0qm"),b(s,"class","col table-head svelte-1kxd0qm"),b(e,"class","container svelte-1kxd0qm")},m(l,d){P(l,e,d),m(e,r),m(e,a),m(e,i),m(e,h),m(e,s),m(e,k);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(l,[d]){if(d&15){w=le(l[1]);let c;for(c=0;c<w.length;c+=1){const M=oe(l,w,c);t[c]?t[c].p(M,d):(t[c]=re(M),t[c].c(),t[c].m(e,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=w.length}},i:U,o:U,d(l){l&&g(e),ce(t,l)}}}function ve(o,e,r){let{currentBpm:n}=e;const a=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],i=(h,s)=>h>(s.low??0)&&h<=(s.high??9999),v=h=>{if(h.high&&h.low)return`${h.low} - ${h.high}`;if(h.low)return`>${h.low}`;if(h.high)return`<${h.high}`};return o.$$set=h=>{"currentBpm"in h&&r(0,n=h.currentBpm)},[n,a,i,v]}class we extends J{constructor(e){super(),Q(this,e,ve,ge,H,{currentBpm:0})}}function _e(o){let e,r="Tap Tempo",n,a,i,v="Press the space bar or click/tap anywhere on the page to get a bpm.",h,s,u=o[0].bpm+"",k,w,t,l,d,c,M="Reset (c)",X,E,K=o[2]?"Play":"Pause",R,Y,Z,S,ee,T,V,te,se;return S=new pe({props:{taps:o[0].taps,keptDuration:o[0].keptDuration,pause:o[2]}}),T=new we({props:{currentBpm:o[0].bpm}}),{c(){e=_("h3"),e.textContent=r,n=C(),a=_("div"),i=_("div"),i.textContent=v,h=C(),s=_("div"),k=N(u),w=_("br"),t=N("BPM"),l=C(),d=_("div"),c=_("button"),c.textContent=M,X=C(),E=_("button"),R=N(K),Y=N(" (Enter)"),Z=C(),j(S.$$.fragment),ee=C(),j(T.$$.fragment),this.h()},l(f){e=y(f,"H3",{"data-svelte-h":!0}),I(e)!=="svelte-zwchjg"&&(e.textContent=r),n=A(f),a=y(f,"DIV",{class:!0});var p=B(a);i=y(p,"DIV",{"data-svelte-h":!0}),I(i)!=="svelte-11wi1xz"&&(i.textContent=v),h=A(p),s=y(p,"DIV",{class:!0});var D=B(s);k=L(D,u),w=y(D,"BR",{}),t=L(D,"BPM"),D.forEach(g),l=A(p),d=y(p,"DIV",{class:!0});var q=B(d);c=y(q,"BUTTON",{class:!0,"data-svelte-h":!0}),I(c)!=="svelte-5hccmf"&&(c.textContent=M),X=A(q),E=y(q,"BUTTON",{class:!0});var ne=B(E);R=L(ne,K),Y=L(ne," (Enter)"),ne.forEach(g),q.forEach(g),Z=A(p),z(S.$$.fragment,p),ee=A(p),z(T.$$.fragment,p),p.forEach(g),this.h()},h(){b(s,"class","bpm svelte-1t43gmp"),$(s,"tapped",o[1]),b(c,"class","control-button svelte-1t43gmp"),b(E,"class","control-button svelte-1t43gmp"),b(d,"class","controls svelte-1t43gmp"),b(a,"class","container svelte-1t43gmp")},m(f,p){P(f,e,p),P(f,n,p),P(f,a,p),m(a,i),m(a,h),m(a,s),m(s,k),m(s,w),m(s,t),m(a,l),m(a,d),m(d,c),m(d,X),m(d,E),m(E,R),m(E,Y),m(a,Z),F(S,a,null),m(a,ee),F(T,a,null),V=!0,te||(se=[x(window,"keydown",o[5]),x(window,"keyup",o[6]),x(window,"pointerdown",o[3]),x(c,"click",o[4]),x(E,"click",o[7])],te=!0)},p(f,[p]){(!V||p&1)&&u!==(u=f[0].bpm+"")&&ae(k,u),(!V||p&2)&&$(s,"tapped",f[1]),(!V||p&4)&&K!==(K=f[2]?"Play":"Pause")&&ae(R,K);const D={};p&1&&(D.taps=f[0].taps),p&1&&(D.keptDuration=f[0].keptDuration),p&4&&(D.pause=f[2]),S.$set(D);const q={};p&1&&(q.currentBpm=f[0].bpm),T.$set(q)},i(f){V||(G(S.$$.fragment,f),G(T.$$.fragment,f),V=!0)},o(f){O(S.$$.fragment,f),O(T.$$.fragment,f),V=!1},d(f){f&&(g(e),g(n),g(a)),W(S),W(T),te=!1,he(se)}}}function ye(o,e,r){let n=new ue,a=!1;const i=()=>{h||(n.addBeat(),r(0,n),r(1,a=!0),setTimeout(()=>r(1,a=!1),100))},v=()=>{n.reset(),r(0,n)};let h=!1,s=!0;return[n,a,h,i,v,t=>{const l=" ",d="Enter",c="c";if([l,d,c].includes(t.key)&&(t.preventDefault(),!!s)){if(s=!1,t.key===l){r(2,h=!1),i();return}if(t.key===d){r(2,h=!h);return}t.key===c&&(v(),r(0,n))}},t=>{const l=" ";!s&&t.key===l&&(s=!0,t.preventDefault())},()=>r(2,h=!h)]}class ke extends J{constructor(e){super(),Q(this,e,ye,_e,H,{})}}function be(o){let e,r;return e=new ke({}),{c(){j(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,a){F(e,n,a),r=!0},p:U,i(n){r||(G(e.$$.fragment,n),r=!0)},o(n){O(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}class Ee extends J{constructor(e){super(),Q(this,e,null,be,H,{})}}export{Ee as component};
