import{s as Q,f as k,g as b,h as B,d as v,j as C,i as D,z as H,D as re,a as P,u as K,c as A,y as f,H as ie,l as L,m as I,P as V,B as j,n as se,C as ce}from"../chunks/scheduler.340eebe2.js";import{S as X,i as Y,b as O,d as W,m as F,a as G,t as Z,e as J}from"../chunks/index.ff53592b.js";import{P as he}from"../chunks/P5.79aadd34.js";import{e as ae}from"../chunks/each.d28081da.js";function de(o){let e,l,n;return l=new he({props:{sketch:o[0]}}),{c(){e=k("div"),O(l.$$.fragment),this.h()},l(r){e=b(r,"DIV",{id:!0,class:!0});var i=B(e);W(l.$$.fragment,i),i.forEach(v),this.h()},h(){C(e,"id","canvas-container"),C(e,"class","d-flex justify-content-center")},m(r,i){D(r,e,i),F(l,e,null),n=!0},p:H,i(r){n||(G(l.$$.fragment,r),n=!0)},o(r){Z(l.$$.fragment,r),n=!1},d(r){r&&v(e),J(l)}}}function ue(o,e,l){let n,{keptDuration:r}=e,{taps:i}=e,{pause:_}=e;const d=s=>{s.setup=()=>{l(4,n=s),s.createCanvas(600,100)},s.draw=()=>{const u=document.getElementById("canvas-container");if(u){const t=(u==null?void 0:u.clientWidth)||600;s.width!==t&&s.resizeCanvas(t,100);const a=getComputedStyle(document.body),c=a.getPropertyValue("--nc-bg-2")||"white",h=a.getPropertyValue("--nc-tx-1")||"black";s.background(c),s.stroke(h)}const y=Date.now(),g=y-r;for(const t of i){const a=s.map(t,y,g,s.width,0);s.line(a,0,a,s.height)}}};return re(()=>{n==null||n.remove()}),o.$$set=s=>{"keptDuration"in s&&l(1,r=s.keptDuration),"taps"in s&&l(2,i=s.taps),"pause"in s&&l(3,_=s.pause)},o.$$.update=()=>{o.$$.dirty&24&&(_?n==null||n.noLoop():n==null||n.loop())},[d,r,i,_,n]}class fe extends X{constructor(e){super(),Y(this,e,ue,de,Q,{keptDuration:1,taps:2,pause:3})}}function oe(o,e,l){const n=o.slice();return n[4]=e[l],n}function le(o){let e,l=o[3](o[4])+"",n,r,i,_=o[4].name+"",d,s,u,y=o[4].description+"",g;return{c(){e=k("span"),n=L(l),r=P(),i=k("span"),d=L(_),s=P(),u=k("span"),g=L(y),this.h()},l(t){e=b(t,"SPAN",{class:!0});var a=B(e);n=I(a,l),a.forEach(v),r=A(t),i=b(t,"SPAN",{class:!0});var c=B(i);d=I(c,_),c.forEach(v),s=A(t),u=b(t,"SPAN",{class:!0});var h=B(u);g=I(h,y),h.forEach(v),this.h()},h(){C(e,"class","col col-first svelte-1kxd0qm"),V(e,"selected",o[2](o[0],o[4])),C(i,"class","col svelte-1kxd0qm"),V(i,"selected",o[2](o[0],o[4])),C(u,"class","col svelte-1kxd0qm"),V(u,"selected",o[2](o[0],o[4]))},m(t,a){D(t,e,a),f(e,n),D(t,r,a),D(t,i,a),f(i,d),D(t,s,a),D(t,u,a),f(u,g)},p(t,a){a&7&&V(e,"selected",t[2](t[0],t[4])),a&7&&V(i,"selected",t[2](t[0],t[4])),a&7&&V(u,"selected",t[2](t[0],t[4]))},d(t){t&&(v(e),v(r),v(i),v(s),v(u))}}}function me(o){let e,l,n="BPM",r,i,_="Tempo",d,s,u="Description",y,g=ae(o[1]),t=[];for(let a=0;a<g.length;a+=1)t[a]=le(oe(o,g,a));return{c(){e=k("div"),l=k("span"),l.textContent=n,r=P(),i=k("span"),i.textContent=_,d=P(),s=k("span"),s.textContent=u,y=P();for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var c=B(e);l=b(c,"SPAN",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-1e4w2ks"&&(l.textContent=n),r=A(c),i=b(c,"SPAN",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1lklpwv"&&(i.textContent=_),d=A(c),s=b(c,"SPAN",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-df2g4a"&&(s.textContent=u),y=A(c);for(let h=0;h<t.length;h+=1)t[h].l(c);c.forEach(v),this.h()},h(){C(l,"class","col col-first table-head svelte-1kxd0qm"),C(i,"class","col table-head svelte-1kxd0qm"),C(s,"class","col table-head svelte-1kxd0qm"),C(e,"class","container svelte-1kxd0qm")},m(a,c){D(a,e,c),f(e,l),f(e,r),f(e,i),f(e,d),f(e,s),f(e,y);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null)},p(a,[c]){if(c&15){g=ae(a[1]);let h;for(h=0;h<g.length;h+=1){const N=oe(a,g,h);t[h]?t[h].p(N,c):(t[h]=le(N),t[h].c(),t[h].m(e,null))}for(;h<t.length;h+=1)t[h].d(1);t.length=g.length}},i:H,o:H,d(a){a&&v(e),ie(t,a)}}}function pe(o,e,l){let{currentBpm:n}=e;const r=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],i=(d,s)=>d>(s.low??0)&&d<=(s.high??9999),_=d=>{if(d.high&&d.low)return`${d.low} - ${d.high}`;if(d.low)return`>${d.low}`;if(d.high)return`<${d.high}`};return o.$$set=d=>{"currentBpm"in d&&l(0,n=d.currentBpm)},[n,r,i,_]}class ge extends X{constructor(e){super(),Y(this,e,pe,me,Q,{currentBpm:0})}}function we(o){let e,l="Tap Tempo",n,r,i,_="Press the space bar or click/tap anywhere on the page to get a bpm.",d,s,u,y,g,t,a,c,h="Reset (c)",N,E,R=o[3]?"Play":"Pause",w,M,q,S,U,T,x,ee,ne;return S=new fe({props:{taps:o[0],keptDuration:o[4],pause:o[3]}}),T=new ge({props:{currentBpm:o[2]}}),{c(){e=k("h3"),e.textContent=l,n=P(),r=k("div"),i=k("div"),i.textContent=_,d=P(),s=k("div"),u=L(o[2]),y=k("br"),g=L("BPM"),t=P(),a=k("div"),c=k("button"),c.textContent=h,N=P(),E=k("button"),w=L(R),M=L(" (Enter)"),q=P(),O(S.$$.fragment),U=P(),O(T.$$.fragment),this.h()},l(m){e=b(m,"H3",{"data-svelte-h":!0}),K(e)!=="svelte-zwchjg"&&(e.textContent=l),n=A(m),r=b(m,"DIV",{class:!0});var p=B(r);i=b(p,"DIV",{"data-svelte-h":!0}),K(i)!=="svelte-zyjs4h"&&(i.textContent=_),d=A(p),s=b(p,"DIV",{class:!0});var $=B(s);u=I($,o[2]),y=b($,"BR",{}),g=I($,"BPM"),$.forEach(v),t=A(p),a=b(p,"DIV",{class:!0});var z=B(a);c=b(z,"BUTTON",{class:!0,"data-svelte-h":!0}),K(c)!=="svelte-5hccmf"&&(c.textContent=h),N=A(z),E=b(z,"BUTTON",{class:!0});var te=B(E);w=I(te,R),M=I(te," (Enter)"),te.forEach(v),z.forEach(v),q=A(p),W(S.$$.fragment,p),U=A(p),W(T.$$.fragment,p),p.forEach(v),this.h()},h(){C(s,"class","bpm svelte-x28zb1"),V(s,"tapped",o[1]),C(c,"class","control-button svelte-x28zb1"),C(E,"class","control-button svelte-x28zb1"),C(a,"class","controls svelte-x28zb1"),C(r,"class","container svelte-x28zb1")},m(m,p){D(m,e,p),D(m,n,p),D(m,r,p),f(r,i),f(r,d),f(r,s),f(s,u),f(s,y),f(s,g),f(r,t),f(r,a),f(a,c),f(a,N),f(a,E),f(E,w),f(E,M),f(r,q),F(S,r,null),f(r,U),F(T,r,null),x=!0,ee||(ne=[j(window,"keydown",o[7]),j(window,"keyup",o[8]),j(window,"pointerdown",o[6]),j(c,"click",o[5]),j(E,"click",o[9])],ee=!0)},p(m,[p]){(!x||p&4)&&se(u,m[2]),(!x||p&2)&&V(s,"tapped",m[1]),(!x||p&8)&&R!==(R=m[3]?"Play":"Pause")&&se(w,R);const $={};p&1&&($.taps=m[0]),p&8&&($.pause=m[3]),S.$set($);const z={};p&4&&(z.currentBpm=m[2]),T.$set(z)},i(m){x||(G(S.$$.fragment,m),G(T.$$.fragment,m),x=!0)},o(m){Z(S.$$.fragment,m),Z(T.$$.fragment,m),x=!1},d(m){m&&(v(e),v(n),v(r)),J(S),J(T),ee=!1,ce(ne)}}}function ve(o,e,l){let n=[],i=!1,_=0;const d=()=>{l(0,n=[]),l(2,_=0),u=0},s=()=>{const w=Date.now();for(n.push(Date.now());n.length&&n[0]<w-15e3;)n.shift();l(0,n),l(1,i=!0),setTimeout(()=>l(1,i=!1),100),a()};let u=0,y=0,g=0,t=0;const a=()=>{if(c)return;const w=Date.now();u===0&&(g=w,t=0),u=w;const M=w-y;y=u;const q=u-g;q!==0&&l(2,_=Math.round(6e4*t/q)),t++,M>3e3&&(u=0)};let c=!1,h=!0;return[n,i,_,c,15e3,d,s,w=>{if([32,13,67].includes(w.keyCode)&&(w.preventDefault(),!!h)){if(h=!1,w.keyCode===32){s();return}if(w.keyCode===13){l(3,c=!c);return}w.keyCode===67&&d()}},w=>{!h&&w.keyCode===32&&(h=!0,w.preventDefault())},()=>l(3,c=!c)]}class _e extends X{constructor(e){super(),Y(this,e,ve,we,Q,{})}}function ye(o){let e,l;return e=new _e({}),{c(){O(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){F(e,n,r),l=!0},p:H,i(n){l||(G(e.$$.fragment,n),l=!0)},o(n){Z(e.$$.fragment,n),l=!1},d(n){J(e,n)}}}class Ae extends X{constructor(e){super(),Y(this,e,null,ye,Q,{})}}export{Ae as component};
