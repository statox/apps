import{s as Y,f as C,a as I,g as k,h as V,N as U,c as T,d as p,j as L,i as b,H as y,r as A,P as mt,Q as Ct,l as z,m as H,w as O,n as q,A as kt,e as M,B as xt,R as yt,S as G}from"../chunks/scheduler.iIK8JZF-.js";import{g as lt,a as $t,h as ft,u as Pt}from"../chunks/service.qXM59cDu.js";import{S as Z,i as tt,b as it,d as ot,m as rt,a as R,t as F,e as at,g as gt,c as Et}from"../chunks/index.4WrFP_y-.js";import{P as et}from"../chunks/public.C30nq52-.js";import{e as X}from"../chunks/each.54SC3ldL.js";const Dt=async()=>{const l=et+"/clipboard/getPublicEntries";return fetch(l,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(t=>t.json())},It=async()=>{const l=et+"/clipboard/getAllEntries";return lt().then(async t=>fetch(l,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}).then(e=>e.json()))},Tt=async l=>{const t=et+"/clipboard/addEntry";return lt().then(async e=>fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(l)}))},wt=async l=>{const t=et+"/clipboard/deleteEntry";return lt().then(async e=>fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:l})}))};function pt(l,t,e){const n=l.slice();return n[5]=t[e],n[6]=t,n[7]=e,n}function dt(l){let t,e=l[5].name+"",n,o,i,u=l[5].content+"",s,r,v,$=l[5].creationDateUnix+"",m,c,a,h,f,_='<i class="fas fa-trash-alt"></i> ',x,E;function P(){l[2].call(a,l[6],l[7])}function D(){return l[3](l[5])}return{c(){t=C("div"),n=z(e),o=I(),i=C("div"),s=z(u),r=I(),v=C("div"),m=z($),c=I(),a=C("input"),h=I(),f=C("button"),f.innerHTML=_,this.h()},l(d){t=k(d,"DIV",{});var w=V(t);n=H(w,e),w.forEach(p),o=T(d),i=k(d,"DIV",{});var S=V(i);s=H(S,u),S.forEach(p),r=T(d),v=k(d,"DIV",{});var B=V(v);m=H(B,$),B.forEach(p),c=T(d),a=k(d,"INPUT",{type:!0}),h=T(d),f=k(d,"BUTTON",{class:!0,"data-svelte-h":!0}),U(f)!=="svelte-7l7f86"&&(f.innerHTML=_),this.h()},h(){L(a,"type","checkbox"),a.disabled=!0,L(f,"class","delete-button svelte-ddxkjl")},m(d,w){b(d,t,w),y(t,n),b(d,o,w),b(d,i,w),y(i,s),b(d,r,w),b(d,v,w),y(v,m),b(d,c,w),b(d,a,w),a.checked=l[5].isPublic,b(d,h,w),b(d,f,w),x||(E=[O(a,"change",P),O(f,"click",D)],x=!0)},p(d,w){l=d,w&1&&e!==(e=l[5].name+"")&&q(n,e),w&1&&u!==(u=l[5].content+"")&&q(s,u),w&1&&$!==($=l[5].creationDateUnix+"")&&q(m,$),w&1&&(a.checked=l[5].isPublic)},d(d){d&&(p(t),p(o),p(i),p(r),p(v),p(c),p(a),p(h),p(f)),x=!1,kt(E)}}}function Ut(l){let t,e,n="Name",o,i,u="Content",s,r,v="Creation date",$,m,c="Public",a,h,f="Action",_,x=X(l[0].sort(ht)),E=[];for(let P=0;P<x.length;P+=1)E[P]=dt(pt(l,x,P));return{c(){t=C("div"),e=C("div"),e.textContent=n,o=I(),i=C("div"),i.textContent=u,s=I(),r=C("div"),r.textContent=v,$=I(),m=C("div"),m.textContent=c,a=I(),h=C("div"),h.textContent=f,_=I();for(let P=0;P<E.length;P+=1)E[P].c();this.h()},l(P){t=k(P,"DIV",{class:!0});var D=V(t);e=k(D,"DIV",{"data-svelte-h":!0}),U(e)!=="svelte-ylpshh"&&(e.textContent=n),o=T(D),i=k(D,"DIV",{"data-svelte-h":!0}),U(i)!=="svelte-10sdhlv"&&(i.textContent=u),s=T(D),r=k(D,"DIV",{"data-svelte-h":!0}),U(r)!=="svelte-5cwt31"&&(r.textContent=v),$=T(D),m=k(D,"DIV",{"data-svelte-h":!0}),U(m)!=="svelte-v0s25n"&&(m.textContent=c),a=T(D),h=k(D,"DIV",{"data-svelte-h":!0}),U(h)!=="svelte-d1a0wm"&&(h.textContent=f),_=T(D);for(let d=0;d<E.length;d+=1)E[d].l(D);D.forEach(p),this.h()},h(){L(t,"class","container svelte-ddxkjl")},m(P,D){b(P,t,D),y(t,e),y(t,o),y(t,i),y(t,s),y(t,r),y(t,$),y(t,m),y(t,a),y(t,h),y(t,_);for(let d=0;d<E.length;d+=1)E[d]&&E[d].m(t,null)},p(P,[D]){if(D&3){x=X(P[0].sort(ht));let d;for(d=0;d<x.length;d+=1){const w=pt(P,x,d);E[d]?E[d].p(w,D):(E[d]=dt(w),E[d].c(),E[d].m(t,null))}for(;d<E.length;d+=1)E[d].d(1);E.length=x.length}},i:A,o:A,d(P){P&&p(t),mt(E,P)}}}const ht=(l,t)=>t.creationDateUnix-l.creationDateUnix;function Nt(l,t,e){const n=Ct();let{clipboard:o}=t;const i=r=>{wt(r).then(v=>n("delete"))};function u(r,v){r[v].isPublic=this.checked,e(0,o)}const s=r=>i(r.name);return l.$$set=r=>{"clipboard"in r&&e(0,o=r.clipboard)},[o,i,u,s]}class Vt extends Z{constructor(t){super(),tt(this,t,Nt,Ut,Y,{clipboard:0})}}function _t(l,t,e){const n=l.slice();return n[1]=t[e],n}function vt(l){let t,e=l[1].name+"",n,o,i,u=l[1].content+"",s,r,v,$=l[1].creationDateUnix+"",m;return{c(){t=C("div"),n=z(e),o=I(),i=C("div"),s=z(u),r=I(),v=C("div"),m=z($)},l(c){t=k(c,"DIV",{});var a=V(t);n=H(a,e),a.forEach(p),o=T(c),i=k(c,"DIV",{});var h=V(i);s=H(h,u),h.forEach(p),r=T(c),v=k(c,"DIV",{});var f=V(v);m=H(f,$),f.forEach(p)},m(c,a){b(c,t,a),y(t,n),b(c,o,a),b(c,i,a),y(i,s),b(c,r,a),b(c,v,a),y(v,m)},p(c,a){a&1&&e!==(e=c[1].name+"")&&q(n,e),a&1&&u!==(u=c[1].content+"")&&q(s,u),a&1&&$!==($=c[1].creationDateUnix+"")&&q(m,$)},d(c){c&&(p(t),p(o),p(i),p(r),p(v))}}}function Lt(l){let t,e,n="Name",o,i,u="Content",s,r,v="Creation date",$,m=X(l[0].sort(bt)),c=[];for(let a=0;a<m.length;a+=1)c[a]=vt(_t(l,m,a));return{c(){t=C("div"),e=C("div"),e.textContent=n,o=I(),i=C("div"),i.textContent=u,s=I(),r=C("div"),r.textContent=v,$=I();for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){t=k(a,"DIV",{class:!0});var h=V(t);e=k(h,"DIV",{"data-svelte-h":!0}),U(e)!=="svelte-ylpshh"&&(e.textContent=n),o=T(h),i=k(h,"DIV",{"data-svelte-h":!0}),U(i)!=="svelte-10sdhlv"&&(i.textContent=u),s=T(h),r=k(h,"DIV",{"data-svelte-h":!0}),U(r)!=="svelte-5cwt31"&&(r.textContent=v),$=T(h);for(let f=0;f<c.length;f+=1)c[f].l(h);h.forEach(p),this.h()},h(){L(t,"class","container svelte-1wcqayr")},m(a,h){b(a,t,h),y(t,e),y(t,o),y(t,i),y(t,s),y(t,r),y(t,$);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(t,null)},p(a,[h]){if(h&1){m=X(a[0].sort(bt));let f;for(f=0;f<m.length;f+=1){const _=_t(a,m,f);c[f]?c[f].p(_,h):(c[f]=vt(_),c[f].c(),c[f].m(t,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=m.length}},i:A,o:A,d(a){a&&p(t),mt(c,a)}}}const bt=(l,t)=>t.creationDateUnix-l.creationDateUnix;function At(l,t,e){let{clipboard:n}=t;return l.$$set=o=>{"clipboard"in o&&e(0,n=o.clipboard)},[n]}class St extends Z{constructor(t){super(),tt(this,t,At,Lt,Y,{clipboard:0})}}function Bt(l){let t,e="Login to upload content";return{c(){t=C("p"),t.textContent=e},l(n){t=k(n,"P",{"data-svelte-h":!0}),U(t)!=="svelte-k7lhwu"&&(t.textContent=e)},m(n,o){b(n,t,o)},p:A,d(n){n&&p(t)}}}function jt(l){let t,e,n="Name",o,i,u,s,r,v="Content",$,m,c,a,h,f="TTL (seconds)",_,x,E,P,D,d="Public",w,S,B,J,j,st="Upload",nt,ct;return{c(){t=C("p"),e=C("label"),e.textContent=n,o=I(),i=C("input"),u=I(),s=C("p"),r=C("label"),r.textContent=v,$=I(),m=C("input"),c=I(),a=C("p"),h=C("label"),h.textContent=f,_=I(),x=C("input"),E=I(),P=C("p"),D=C("label"),D.textContent=d,w=I(),S=C("input"),B=I(),J=C("p"),j=C("button"),j.textContent=st,this.h()},l(g){t=k(g,"P",{});var N=V(t);e=k(N,"LABEL",{for:!0,"data-svelte-h":!0}),U(e)!=="svelte-bs9sy6"&&(e.textContent=n),o=T(N),i=k(N,"INPUT",{type:!0}),N.forEach(p),u=T(g),s=k(g,"P",{});var Q=V(s);r=k(Q,"LABEL",{for:!0,"data-svelte-h":!0}),U(r)!=="svelte-xqeh5o"&&(r.textContent=v),$=T(Q),m=k(Q,"INPUT",{type:!0}),Q.forEach(p),c=T(g),a=k(g,"P",{});var K=V(a);h=k(K,"LABEL",{for:!0,"data-svelte-h":!0}),U(h)!=="svelte-und167"&&(h.textContent=f),_=T(K),x=k(K,"INPUT",{type:!0,min:!0}),K.forEach(p),E=T(g),P=k(g,"P",{});var W=V(P);D=k(W,"LABEL",{for:!0,"data-svelte-h":!0}),U(D)!=="svelte-13upoz2"&&(D.textContent=d),w=T(W),S=k(W,"INPUT",{type:!0}),W.forEach(p),B=T(g),J=k(g,"P",{});var ut=V(J);j=k(ut,"BUTTON",{"data-svelte-h":!0}),U(j)!=="svelte-15774uw"&&(j.textContent=st),ut.forEach(p),this.h()},h(){L(e,"for","name"),L(i,"type","text"),L(r,"for","content"),L(m,"type","text"),L(h,"for","ttlSeconds"),L(x,"type","number"),L(x,"min","0"),L(D,"for","isPublic"),L(S,"type","checkbox")},m(g,N){b(g,t,N),y(t,e),y(t,o),y(t,i),G(i,l[0]),b(g,u,N),b(g,s,N),y(s,r),y(s,$),y(s,m),G(m,l[1]),b(g,c,N),b(g,a,N),y(a,h),y(a,_),y(a,x),G(x,l[2]),b(g,E,N),b(g,P,N),y(P,D),y(P,w),y(P,S),S.checked=l[3],b(g,B,N),b(g,J,N),y(J,j),nt||(ct=[O(i,"input",l[6]),O(m,"input",l[7]),O(x,"input",l[8]),O(S,"change",l[9]),O(j,"click",l[5])],nt=!0)},p(g,N){N&1&&i.value!==g[0]&&G(i,g[0]),N&2&&m.value!==g[1]&&G(m,g[1]),N&4&&yt(x.value)!==g[2]&&G(x,g[2]),N&8&&(S.checked=g[3])},d(g){g&&(p(t),p(u),p(s),p(c),p(a),p(E),p(P),p(B),p(J)),nt=!1,kt(ct)}}}function Ot(l){let t;function e(i,u){return i[4]?jt:Bt}let n=e(l),o=n(l);return{c(){o.c(),t=M()},l(i){o.l(i),t=M()},m(i,u){o.m(i,u),b(i,t,u)},p(i,[u]){n===(n=e(i))&&o?o.p(i,u):(o.d(1),o=n(i),o&&(o.c(),o.m(t.parentNode,t)))},i:A,o:A,d(i){i&&p(t),o.d(i)}}}function zt(l,t,e){let n;xt(l,$t,h=>e(4,n=h));const o=Ct();let i,u,s=3600,r=!1;const v=()=>{i.length&&u.length&&(s<0||Tt({name:i,content:u,ttlSeconds:s,isPublic:r}).then(h=>o("upload")).catch(h=>{h.message}))};function $(){i=this.value,e(0,i)}function m(){u=this.value,e(1,u)}function c(){s=yt(this.value),e(2,s)}function a(){r=this.checked,e(3,r)}return[i,u,s,r,n,v,$,m,c,a]}class Ht extends Z{constructor(t){super(),tt(this,t,zt,Ot,Y,{})}}function qt(l){let t,e="Something went wrong",n,o,i=JSON.stringify(l[6])+"",u;return{c(){t=C("p"),t.textContent=e,n=I(),o=C("p"),u=z(i)},l(s){t=k(s,"P",{"data-svelte-h":!0}),U(t)!=="svelte-171fb2d"&&(t.textContent=e),n=T(s),o=k(s,"P",{});var r=V(o);u=H(r,i),r.forEach(p)},m(s,r){b(s,t,r),b(s,n,r),b(s,o,r),y(o,u)},p(s,r){r&1&&i!==(i=JSON.stringify(s[6])+"")&&q(u,i)},i:A,o:A,d(s){s&&(p(t),p(n),p(o))}}}function Jt(l){let t,e,n,o;const i=[Mt,Gt],u=[];function s(r,v){return r[1]?0:1}return t=s(l),e=u[t]=i[t](l),{c(){e.c(),n=M()},l(r){e.l(r),n=M()},m(r,v){u[t].m(r,v),b(r,n,v),o=!0},p(r,v){let $=t;t=s(r),t===$?u[t].p(r,v):(gt(),F(u[$],1,1,()=>{u[$]=null}),Et(),e=u[t],e?e.p(r,v):(e=u[t]=i[t](r),e.c()),R(e,1),e.m(n.parentNode,n))},i(r){o||(R(e),o=!0)},o(r){F(e),o=!1},d(r){r&&p(n),u[t].d(r)}}}function Gt(l){let t,e;return t=new St({props:{clipboard:l[5]}}),{c(){it(t.$$.fragment)},l(n){ot(t.$$.fragment,n)},m(n,o){rt(t,n,o),e=!0},p(n,o){const i={};o&1&&(i.clipboard=n[5]),t.$set(i)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){F(t.$$.fragment,n),e=!1},d(n){at(t,n)}}}function Mt(l){let t,e;return t=new Vt({props:{clipboard:l[5]}}),t.$on("delete",l[4]),{c(){it(t.$$.fragment)},l(n){ot(t.$$.fragment,n)},m(n,o){rt(t,n,o),e=!0},p(n,o){const i={};o&1&&(i.clipboard=n[5]),t.$set(i)},i(n){e||(R(t.$$.fragment,n),e=!0)},o(n){F(t.$$.fragment,n),e=!1},d(n){at(t,n)}}}function Rt(l){let t,e="Loading data";return{c(){t=C("p"),t.textContent=e},l(n){t=k(n,"P",{"data-svelte-h":!0}),U(t)!=="svelte-ezyzhc"&&(t.textContent=e)},m(n,o){b(n,t,o)},p:A,i:A,o:A,d(n){n&&p(t)}}}function Ft(l){let t,e="Clipboard",n,o,i="Upload",u,s,r,v,$="Content",m,c,a,h;s=new Ht({}),s.$on("upload",l[3]);let f={ctx:l,current:null,token:null,hasCatch:!0,pending:Rt,then:Jt,catch:qt,value:5,error:6,blocks:[,,,]};return ft(a=l[0],f),{c(){t=C("h2"),t.textContent=e,n=I(),o=C("h3"),o.textContent=i,u=I(),it(s.$$.fragment),r=I(),v=C("h3"),v.textContent=$,m=I(),c=M(),f.block.c()},l(_){t=k(_,"H2",{"data-svelte-h":!0}),U(t)!=="svelte-1cwnlts"&&(t.textContent=e),n=T(_),o=k(_,"H3",{"data-svelte-h":!0}),U(o)!=="svelte-18fi3zp"&&(o.textContent=i),u=T(_),ot(s.$$.fragment,_),r=T(_),v=k(_,"H3",{"data-svelte-h":!0}),U(v)!=="svelte-1qnf76d"&&(v.textContent=$),m=T(_),c=M(),f.block.l(_)},m(_,x){b(_,t,x),b(_,n,x),b(_,o,x),b(_,u,x),rt(s,_,x),b(_,r,x),b(_,v,x),b(_,m,x),b(_,c,x),f.block.m(_,f.anchor=x),f.mount=()=>c.parentNode,f.anchor=c,h=!0},p(_,[x]){l=_,f.ctx=l,x&1&&a!==(a=l[0])&&ft(a,f)||Pt(f,l,x)},i(_){h||(R(s.$$.fragment,_),R(f.block),h=!0)},o(_){F(s.$$.fragment,_);for(let x=0;x<3;x+=1){const E=f.blocks[x];F(E)}h=!1},d(_){_&&(p(t),p(n),p(o),p(u),p(r),p(v),p(m),p(c)),at(s,_),f.block.d(_),f.token=null,f=null}}}function Qt(l,t,e){let n;xt(l,$t,r=>e(1,n=r));const o=()=>n?It():Dt();let i=o();return[i,n,o,()=>e(0,i=o()),()=>e(0,i=o())]}class te extends Z{constructor(t){super(),tt(this,t,Qt,Ft,Y,{})}}export{te as component};
