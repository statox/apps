import{s as X,f as _,a as E,g as m,h as L,N as U,c as g,d as c,j as N,i as h,H as x,r as A,P as bt,l as J,m as G,w as j,n as R,e as F,B as ct,Q as Ct,R as pt,S as V,A as kt}from"../chunks/scheduler.iIK8JZF-.js";import{g as ft,a as dt,h as it,u as xt}from"../chunks/service.qXM59cDu.js";import{S as Y,i as Z,b as ht,d as _t,m as mt,a as M,t as W,e as vt}from"../chunks/index.4WrFP_y-.js";import{P as tt}from"../chunks/public.C30nq52-.js";import{e as rt}from"../chunks/each.54SC3ldL.js";const Pt=async()=>{const o=tt+"/clipboard/getPublicEntries";return fetch(o,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(t=>t.json())},yt=async()=>{const o=tt+"/clipboard/getAllEntries";return ft().then(async t=>fetch(o,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}).then(i=>i.json()))},Et=async o=>{const t=tt+"/clipboard/addEntry";return ft().then(async i=>fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(o)}))};function at(o,t,i){const e=o.slice();return e[2]=t[i],e[3]=t,e[4]=i,e}function st(o){let t,i=o[2].name+"",e,a,l,f=o[2].content+"",s,d,P,T=o[2].creationDateUnix+"",k,y,v,C,p;function r(){o[1].call(v,o[3],o[4])}return{c(){t=_("div"),e=J(i),a=E(),l=_("div"),s=J(f),d=E(),P=_("div"),k=J(T),y=E(),v=_("input"),this.h()},l(n){t=m(n,"DIV",{});var u=L(t);e=G(u,i),u.forEach(c),a=g(n),l=m(n,"DIV",{});var I=L(l);s=G(I,f),I.forEach(c),d=g(n),P=m(n,"DIV",{});var D=L(P);k=G(D,T),D.forEach(c),y=g(n),v=m(n,"INPUT",{type:!0}),this.h()},h(){N(v,"type","checkbox")},m(n,u){h(n,t,u),x(t,e),h(n,a,u),h(n,l,u),x(l,s),h(n,d,u),h(n,P,u),x(P,k),h(n,y,u),h(n,v,u),v.checked=o[2].isPublic,C||(p=j(v,"change",r),C=!0)},p(n,u){o=n,u&1&&i!==(i=o[2].name+"")&&R(e,i),u&1&&f!==(f=o[2].content+"")&&R(s,f),u&1&&T!==(T=o[2].creationDateUnix+"")&&R(k,T),u&1&&(v.checked=o[2].isPublic)},d(n){n&&(c(t),c(a),c(l),c(d),c(P),c(y),c(v)),C=!1,p()}}}function gt(o){let t,i,e="Name",a,l,f="Content",s,d,P="Creation date",T,k,y="Public",v,C=rt(o[0].sort(ut)),p=[];for(let r=0;r<C.length;r+=1)p[r]=st(at(o,C,r));return{c(){t=_("div"),i=_("div"),i.textContent=e,a=E(),l=_("div"),l.textContent=f,s=E(),d=_("div"),d.textContent=P,T=E(),k=_("div"),k.textContent=y,v=E();for(let r=0;r<p.length;r+=1)p[r].c();this.h()},l(r){t=m(r,"DIV",{class:!0});var n=L(t);i=m(n,"DIV",{"data-svelte-h":!0}),U(i)!=="svelte-ylpshh"&&(i.textContent=e),a=g(n),l=m(n,"DIV",{"data-svelte-h":!0}),U(l)!=="svelte-10sdhlv"&&(l.textContent=f),s=g(n),d=m(n,"DIV",{"data-svelte-h":!0}),U(d)!=="svelte-5cwt31"&&(d.textContent=P),T=g(n),k=m(n,"DIV",{"data-svelte-h":!0}),U(k)!=="svelte-v0s25n"&&(k.textContent=y),v=g(n);for(let u=0;u<p.length;u+=1)p[u].l(n);n.forEach(c),this.h()},h(){N(t,"class","container svelte-1ckqr1q")},m(r,n){h(r,t,n),x(t,i),x(t,a),x(t,l),x(t,s),x(t,d),x(t,T),x(t,k),x(t,v);for(let u=0;u<p.length;u+=1)p[u]&&p[u].m(t,null)},p(r,[n]){if(n&1){C=rt(r[0].sort(ut));let u;for(u=0;u<C.length;u+=1){const I=at(r,C,u);p[u]?p[u].p(I,n):(p[u]=st(I),p[u].c(),p[u].m(t,null))}for(;u<p.length;u+=1)p[u].d(1);p.length=C.length}},i:A,o:A,d(r){r&&c(t),bt(p,r)}}}const ut=(o,t)=>t.creationDateUnix-o.creationDateUnix;function $t(o,t,i){let{clipboard:e}=t;function a(l,f){l[f].isPublic=this.checked,i(0,e)}return o.$$set=l=>{"clipboard"in l&&i(0,e=l.clipboard)},[e,a]}class Tt extends Y{constructor(t){super(),Z(this,t,$t,gt,X,{clipboard:0})}}function Ut(o){let t,i="Login to upload content";return{c(){t=_("p"),t.textContent=i},l(e){t=m(e,"P",{"data-svelte-h":!0}),U(t)!=="svelte-k7lhwu"&&(t.textContent=i)},m(e,a){h(e,t,a)},p:A,d(e){e&&c(t)}}}function It(o){let t,i,e="Name",a,l,f,s,d,P="Content",T,k,y,v,C,p="TTL (seconds)",r,n,u,I,D,et="Public",Q,w,z,B,S,nt="Upload",K,lt;return{c(){t=_("p"),i=_("label"),i.textContent=e,a=E(),l=_("input"),f=E(),s=_("p"),d=_("label"),d.textContent=P,T=E(),k=_("input"),y=E(),v=_("p"),C=_("label"),C.textContent=p,r=E(),n=_("input"),u=E(),I=_("p"),D=_("label"),D.textContent=et,Q=E(),w=_("input"),z=E(),B=_("p"),S=_("button"),S.textContent=nt,this.h()},l(b){t=m(b,"P",{});var $=L(t);i=m($,"LABEL",{for:!0,"data-svelte-h":!0}),U(i)!=="svelte-bs9sy6"&&(i.textContent=e),a=g($),l=m($,"INPUT",{type:!0}),$.forEach(c),f=g(b),s=m(b,"P",{});var q=L(s);d=m(q,"LABEL",{for:!0,"data-svelte-h":!0}),U(d)!=="svelte-xqeh5o"&&(d.textContent=P),T=g(q),k=m(q,"INPUT",{type:!0}),q.forEach(c),y=g(b),v=m(b,"P",{});var O=L(v);C=m(O,"LABEL",{for:!0,"data-svelte-h":!0}),U(C)!=="svelte-und167"&&(C.textContent=p),r=g(O),n=m(O,"INPUT",{type:!0,min:!0}),O.forEach(c),u=g(b),I=m(b,"P",{});var H=L(I);D=m(H,"LABEL",{for:!0,"data-svelte-h":!0}),U(D)!=="svelte-13upoz2"&&(D.textContent=et),Q=g(H),w=m(H,"INPUT",{type:!0}),H.forEach(c),z=g(b),B=m(b,"P",{});var ot=L(B);S=m(ot,"BUTTON",{"data-svelte-h":!0}),U(S)!=="svelte-15774uw"&&(S.textContent=nt),ot.forEach(c),this.h()},h(){N(i,"for","name"),N(l,"type","text"),N(d,"for","content"),N(k,"type","text"),N(C,"for","ttlSeconds"),N(n,"type","number"),N(n,"min","0"),N(D,"for","isPublic"),N(w,"type","checkbox")},m(b,$){h(b,t,$),x(t,i),x(t,a),x(t,l),V(l,o[0]),h(b,f,$),h(b,s,$),x(s,d),x(s,T),x(s,k),V(k,o[1]),h(b,y,$),h(b,v,$),x(v,C),x(v,r),x(v,n),V(n,o[2]),h(b,u,$),h(b,I,$),x(I,D),x(I,Q),x(I,w),w.checked=o[3],h(b,z,$),h(b,B,$),x(B,S),K||(lt=[j(l,"input",o[6]),j(k,"input",o[7]),j(n,"input",o[8]),j(w,"change",o[9]),j(S,"click",o[5])],K=!0)},p(b,$){$&1&&l.value!==b[0]&&V(l,b[0]),$&2&&k.value!==b[1]&&V(k,b[1]),$&4&&pt(n.value)!==b[2]&&V(n,b[2]),$&8&&(w.checked=b[3])},d(b){b&&(c(t),c(f),c(s),c(y),c(v),c(u),c(I),c(z),c(B)),K=!1,kt(lt)}}}function Nt(o){let t;function i(l,f){return l[4]?It:Ut}let e=i(o),a=e(o);return{c(){a.c(),t=F()},l(l){a.l(l),t=F()},m(l,f){a.m(l,f),h(l,t,f)},p(l,[f]){e===(e=i(l))&&a?a.p(l,f):(a.d(1),a=e(l),a&&(a.c(),a.m(t.parentNode,t)))},i:A,o:A,d(l){l&&c(t),a.d(l)}}}function Dt(o,t,i){let e;ct(o,dt,C=>i(4,e=C));const a=Ct();let l,f,s=3600,d=!1;const P=()=>{l.length&&f.length&&(s<0||Et({name:l,content:f,ttlSeconds:s,isPublic:d}).then(C=>a("upload")).catch(C=>{C.message}))};function T(){l=this.value,i(0,l)}function k(){f=this.value,i(1,f)}function y(){s=pt(this.value),i(2,s)}function v(){d=this.checked,i(3,d)}return[l,f,s,d,e,P,T,k,y,v]}class Lt extends Y{constructor(t){super(),Z(this,t,Dt,Nt,X,{})}}function At(o){let t,i="Something went wrong",e,a,l=JSON.stringify(o[5])+"",f;return{c(){t=_("p"),t.textContent=i,e=E(),a=_("p"),f=J(l)},l(s){t=m(s,"P",{"data-svelte-h":!0}),U(t)!=="svelte-171fb2d"&&(t.textContent=i),e=g(s),a=m(s,"P",{});var d=L(a);f=G(d,l),d.forEach(c)},m(s,d){h(s,t,d),h(s,e,d),h(s,a,d),x(a,f)},p(s,d){d&1&&l!==(l=JSON.stringify(s[5])+"")&&R(f,l)},i:A,o:A,d(s){s&&(c(t),c(e),c(a))}}}function wt(o){let t,i;return t=new Tt({props:{clipboard:o[4]}}),{c(){ht(t.$$.fragment)},l(e){_t(t.$$.fragment,e)},m(e,a){mt(t,e,a),i=!0},p(e,a){const l={};a&1&&(l.clipboard=e[4]),t.$set(l)},i(e){i||(M(t.$$.fragment,e),i=!0)},o(e){W(t.$$.fragment,e),i=!1},d(e){vt(t,e)}}}function St(o){let t,i="Loading data";return{c(){t=_("p"),t.textContent=i},l(e){t=m(e,"P",{"data-svelte-h":!0}),U(t)!=="svelte-ezyzhc"&&(t.textContent=i)},m(e,a){h(e,t,a)},p:A,i:A,o:A,d(e){e&&c(t)}}}function Bt(o){let t,i="Clipboard",e,a,l="Upload",f,s,d,P,T="Content",k,y,v,C;s=new Lt({}),s.$on("upload",o[1]);let p={ctx:o,current:null,token:null,hasCatch:!0,pending:St,then:wt,catch:At,value:4,error:5,blocks:[,,,]};return it(v=o[0],p),{c(){t=_("h2"),t.textContent=i,e=E(),a=_("h3"),a.textContent=l,f=E(),ht(s.$$.fragment),d=E(),P=_("h3"),P.textContent=T,k=E(),y=F(),p.block.c()},l(r){t=m(r,"H2",{"data-svelte-h":!0}),U(t)!=="svelte-1cwnlts"&&(t.textContent=i),e=g(r),a=m(r,"H3",{"data-svelte-h":!0}),U(a)!=="svelte-18fi3zp"&&(a.textContent=l),f=g(r),_t(s.$$.fragment,r),d=g(r),P=m(r,"H3",{"data-svelte-h":!0}),U(P)!=="svelte-1qnf76d"&&(P.textContent=T),k=g(r),y=F(),p.block.l(r)},m(r,n){h(r,t,n),h(r,e,n),h(r,a,n),h(r,f,n),mt(s,r,n),h(r,d,n),h(r,P,n),h(r,k,n),h(r,y,n),p.block.m(r,p.anchor=n),p.mount=()=>y.parentNode,p.anchor=y,C=!0},p(r,[n]){o=r,p.ctx=o,n&1&&v!==(v=o[0])&&it(v,p)||xt(p,o,n)},i(r){C||(M(s.$$.fragment,r),M(p.block),C=!0)},o(r){W(s.$$.fragment,r);for(let n=0;n<3;n+=1){const u=p.blocks[n];W(u)}C=!1},d(r){r&&(c(t),c(e),c(a),c(f),c(d),c(P),c(k),c(y)),vt(s,r),p.block.d(r),p.token=null,p=null}}}function Vt(o,t,i){let e;ct(o,dt,s=>i(2,e=s));const a=()=>e?yt():Pt();let l=a();return[l,()=>{console.log("upload happened"),i(0,l=a())}]}class Jt extends Y{constructor(t){super(),Z(this,t,Vt,Bt,X,{})}}export{Jt as component};
