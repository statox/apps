import{s as H,f as _,g as k,h as E,d as g,j as b,i as P,A as U,F as ie,a as C,B as M,c as A,D as u,L as ce,l as N,m as L,G as $,C as x,n as ae,E as he}from"../chunks/scheduler.H7lw1MZO.js";import{S as J,i as Q,b as j,d as z,m as F,a as G,t as O,e as W}from"../chunks/index.bhYHpPrV.js";import{P as de}from"../chunks/P5.UKlpj-8x.js";import{e as le}from"../chunks/each.AWKwI39M.js";import{T as ue}from"../chunks/TapTempo.Oc7is1s8.js";function me(l){let e,r,o;return r=new de({props:{sketch:l[0]}}),{c(){e=_("div"),j(r.$$.fragment),this.h()},l(s){e=k(s,"DIV",{id:!0,class:!0});var i=E(e);z(r.$$.fragment,i),i.forEach(g),this.h()},h(){b(e,"id","canvas-container"),b(e,"class","d-flex justify-content-center")},m(s,i){P(s,e,i),F(r,e,null),o=!0},p:U,i(s){o||(G(r.$$.fragment,s),o=!0)},o(s){O(r.$$.fragment,s),o=!1},d(s){s&&g(e),W(r)}}}function fe(l,e,r){let o,{keptDuration:s}=e,{taps:i}=e,{pause:v}=e;const h=n=>{n.setup=()=>{r(4,o=n),n.createCanvas(600,100)},n.draw=()=>{const f=document.getElementById("canvas-container");if(f){const t=f?.clientWidth||600;n.width!==t&&n.resizeCanvas(t,100);const a=getComputedStyle(document.body),d=a.getPropertyValue("--nc-bg-2")||"white",c=a.getPropertyValue("--nc-tx-1")||"black";n.background(d),n.stroke(c)}const y=Date.now(),w=y-s;for(const t of i){const a=n.map(t,y,w,n.width,0);n.line(a,0,a,n.height)}}};return ie(()=>{o?.remove()}),l.$$set=n=>{"keptDuration"in n&&r(1,s=n.keptDuration),"taps"in n&&r(2,i=n.taps),"pause"in n&&r(3,v=n.pause)},l.$$.update=()=>{l.$$.dirty&24&&(v?o?.noLoop():o?.loop())},[h,s,i,v,o]}class pe extends J{constructor(e){super(),Q(this,e,fe,me,H,{keptDuration:1,taps:2,pause:3})}}function oe(l,e,r){const o=l.slice();return o[4]=e[r],o}function re(l){let e,r=l[3](l[4])+"",o,s,i,v=l[4].name+"",h,n,f,y=l[4].description+"",w;return{c(){e=_("span"),o=N(r),s=C(),i=_("span"),h=N(v),n=C(),f=_("span"),w=N(y),this.h()},l(t){e=k(t,"SPAN",{class:!0});var a=E(e);o=L(a,r),a.forEach(g),s=A(t),i=k(t,"SPAN",{class:!0});var d=E(i);h=L(d,v),d.forEach(g),n=A(t),f=k(t,"SPAN",{class:!0});var c=E(f);w=L(c,y),c.forEach(g),this.h()},h(){b(e,"class","col svelte-1kxd0qm"),$(e,"selected",l[2](l[0],l[4])),b(i,"class","col svelte-1kxd0qm"),$(i,"selected",l[2](l[0],l[4])),b(f,"class","col svelte-1kxd0qm"),$(f,"selected",l[2](l[0],l[4]))},m(t,a){P(t,e,a),u(e,o),P(t,s,a),P(t,i,a),u(i,h),P(t,n,a),P(t,f,a),u(f,w)},p(t,a){a&7&&$(e,"selected",t[2](t[0],t[4])),a&7&&$(i,"selected",t[2](t[0],t[4])),a&7&&$(f,"selected",t[2](t[0],t[4]))},d(t){t&&(g(e),g(s),g(i),g(n),g(f))}}}function ge(l){let e,r,o="BPM",s,i,v="Tempo",h,n,f="Description",y,w=le(l[1]),t=[];for(let a=0;a<w.length;a+=1)t[a]=re(oe(l,w,a));return{c(){e=_("div"),r=_("span"),r.textContent=o,s=C(),i=_("span"),i.textContent=v,h=C(),n=_("span"),n.textContent=f,y=C();for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var d=E(e);r=k(d,"SPAN",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-cdp0q5"&&(r.textContent=o),s=A(d),i=k(d,"SPAN",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-1lklpwv"&&(i.textContent=v),h=A(d),n=k(d,"SPAN",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-df2g4a"&&(n.textContent=f),y=A(d);for(let c=0;c<t.length;c+=1)t[c].l(d);d.forEach(g),this.h()},h(){b(r,"class","col table-head svelte-1kxd0qm"),b(i,"class","col table-head svelte-1kxd0qm"),b(n,"class","col table-head svelte-1kxd0qm"),b(e,"class","container svelte-1kxd0qm")},m(a,d){P(a,e,d),u(e,r),u(e,s),u(e,i),u(e,h),u(e,n),u(e,y);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(a,[d]){if(d&15){w=le(a[1]);let c;for(c=0;c<w.length;c+=1){const I=oe(a,w,c);t[c]?t[c].p(I,d):(t[c]=re(I),t[c].c(),t[c].m(e,null))}for(;c<t.length;c+=1)t[c].d(1);t.length=w.length}},i:U,o:U,d(a){a&&g(e),ce(t,a)}}}function ve(l,e,r){let{currentBpm:o}=e;const s=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],i=(h,n)=>h>(n.low??0)&&h<=(n.high??9999),v=h=>{if(h.high&&h.low)return`${h.low} - ${h.high}`;if(h.low)return`>${h.low}`;if(h.high)return`<${h.high}`};return l.$$set=h=>{"currentBpm"in h&&r(0,o=h.currentBpm)},[o,s,i,v]}class we extends J{constructor(e){super(),Q(this,e,ve,ge,H,{currentBpm:0})}}function _e(l){let e,r="Tap Tempo",o,s,i,v="Press the space bar or click/tap anywhere on the page to get a bpm.",h,n,f=l[0].bpm+"",y,w,t,a,d,c,I="Reset (c)",X,B,K=l[2]?"Play":"Pause",R,Y,Z,S,ee,T,V,te,se;return S=new pe({props:{taps:l[0].taps,keptDuration:l[0].keptDuration,pause:l[2]}}),T=new we({props:{currentBpm:l[0].bpm}}),{c(){e=_("h3"),e.textContent=r,o=C(),s=_("div"),i=_("div"),i.textContent=v,h=C(),n=_("div"),y=N(f),w=_("br"),t=N("BPM"),a=C(),d=_("div"),c=_("button"),c.textContent=I,X=C(),B=_("button"),R=N(K),Y=N(" (Enter)"),Z=C(),j(S.$$.fragment),ee=C(),j(T.$$.fragment),this.h()},l(m){e=k(m,"H3",{"data-svelte-h":!0}),M(e)!=="svelte-zwchjg"&&(e.textContent=r),o=A(m),s=k(m,"DIV",{class:!0});var p=E(s);i=k(p,"DIV",{"data-svelte-h":!0}),M(i)!=="svelte-11wi1xz"&&(i.textContent=v),h=A(p),n=k(p,"DIV",{class:!0});var D=E(n);y=L(D,f),w=k(D,"BR",{}),t=L(D,"BPM"),D.forEach(g),a=A(p),d=k(p,"DIV",{class:!0});var q=E(d);c=k(q,"BUTTON",{class:!0,"data-svelte-h":!0}),M(c)!=="svelte-5hccmf"&&(c.textContent=I),X=A(q),B=k(q,"BUTTON",{class:!0});var ne=E(B);R=L(ne,K),Y=L(ne," (Enter)"),ne.forEach(g),q.forEach(g),Z=A(p),z(S.$$.fragment,p),ee=A(p),z(T.$$.fragment,p),p.forEach(g),this.h()},h(){b(n,"class","bpm svelte-1t43gmp"),$(n,"tapped",l[1]),b(c,"class","control-button svelte-1t43gmp"),b(B,"class","control-button svelte-1t43gmp"),b(d,"class","controls svelte-1t43gmp"),b(s,"class","container svelte-1t43gmp")},m(m,p){P(m,e,p),P(m,o,p),P(m,s,p),u(s,i),u(s,h),u(s,n),u(n,y),u(n,w),u(n,t),u(s,a),u(s,d),u(d,c),u(d,X),u(d,B),u(B,R),u(B,Y),u(s,Z),F(S,s,null),u(s,ee),F(T,s,null),V=!0,te||(se=[x(window,"keydown",l[5]),x(window,"keyup",l[6]),x(window,"pointerdown",l[3]),x(c,"click",l[4]),x(B,"click",l[7])],te=!0)},p(m,[p]){(!V||p&1)&&f!==(f=m[0].bpm+"")&&ae(y,f),(!V||p&2)&&$(n,"tapped",m[1]),(!V||p&4)&&K!==(K=m[2]?"Play":"Pause")&&ae(R,K);const D={};p&1&&(D.taps=m[0].taps),p&1&&(D.keptDuration=m[0].keptDuration),p&4&&(D.pause=m[2]),S.$set(D);const q={};p&1&&(q.currentBpm=m[0].bpm),T.$set(q)},i(m){V||(G(S.$$.fragment,m),G(T.$$.fragment,m),V=!0)},o(m){O(S.$$.fragment,m),O(T.$$.fragment,m),V=!1},d(m){m&&(g(e),g(o),g(s)),W(S),W(T),te=!1,he(se)}}}function ke(l,e,r){let o=new ue,s=!1;const i=()=>{h||(o.addBeat(),r(0,o),r(1,s=!0),setTimeout(()=>r(1,s=!1),100))},v=()=>{o.reset(),r(0,o)};let h=!1,n=!0;return[o,s,h,i,v,t=>{const a=" ",d="Enter",c="c";if([a,d,c].includes(t.key)&&(t.preventDefault(),!!n)){if(n=!1,t.key===a){r(2,h=!1),i();return}if(t.key===d){r(2,h=!h);return}t.key===c&&(v(),r(0,o))}},t=>{const a=" ";!n&&t.key===a&&(n=!0,t.preventDefault())},()=>r(2,h=!h)]}class ye extends J{constructor(e){super(),Q(this,e,ke,_e,H,{})}}function be(l){let e,r;return e=new ye({}),{c(){j(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){F(e,o,s),r=!0},p:U,i(o){r||(G(e.$$.fragment,o),r=!0)},o(o){O(e.$$.fragment,o),r=!1},d(o){W(e,o)}}}class Be extends J{constructor(e){super(),Q(this,e,null,be,H,{})}}export{Be as component};
