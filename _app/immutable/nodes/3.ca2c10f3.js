import{s as tt,f as b,a as A,l as Q,g as R,u as j,c as O,h as S,d as u,m as Y,j as B,i as V,y as I,B as N,z as et,C as mt,D as ht}from"../chunks/scheduler.e543fb2d.js";import{S as nt,i as ot,b as rt,d as it,m as st,a as at,t as lt,e as ct}from"../chunks/index.404f7ce8.js";import{P as dt}from"../chunks/P5.53fbc5b7.js";const w=Math.PI,E={scale:1,position:0,outerRing:{labels:["B°","F♯°","C♯°","G♯°","D♯°","A♯°","F°","C°","G°","D°","A°","E°"],cellSize:2*w/48,ratio:4,innerDiameter:.82,outerDiameter:1},middleRing:{labels:["Em","Am","Bm","Em","F♯m","Bm","C♯m","F♯m","G♯m","C♯m","D♯m","G♯m","A♯m","E♭m","Fm","B♭m","Cm","Fm","Gm","Cm","Dm","Gm","Am","Dm"],cellSize:2*w/24,ratio:1,innerDiameter:.6,outerDiameter:.82},innerRing:{labels:["C","G","D","A","F♭/E","C♭/B","G♭/F♯","D♭/C♯","A♭/G♯","E♭","B♭","F"],cellSize:2*w/12,ratio:1,innerDiameter:.35,outerDiameter:.6}},_=(o,e)=>{if(o>=0)return o%e;for(;o<0;)o+=e;return o},U=(o,e,t,i,r)=>{if(e<0||e>=o.labels.length)throw new Error(`OOB labelIndex: ${e}`);const{cellSize:l,innerDiameter:c,outerDiameter:a,ratio:x}=o,s=r.createVector();s.x=0,s.y=-a/2;const f=e*l*x;s.rotate(f);const n=l/2,g=[s.copy().rotate(-n).setMag(c),s.copy().rotate(-n).setMag(a),s.copy().setMag(a*1.02),s.copy().rotate(n).setMag(a),s.copy().rotate(n).setMag(c),s.copy().setMag(c*1.02)].map(W=>W.mult(i)),d=s.copy().setMag(c+(a-c)/2).mult(i),h=_(e+t,o.labels.length)*360/o.labels.length;return{vertices:g,center:d,label:o.labels[e],color:`hsb(${h}, 50%, 80%)`,colorHue:h}},X=(o,e)=>{const{scale:t}=e,i=e.innerRing.labels.map((c,a)=>U(e.innerRing,a,e.position,t,o)),r=e.middleRing.labels.map((c,a)=>U(e.middleRing,a,e.position*2,t,o)),l=e.outerRing.labels.map((c,a)=>U(e.outerRing,a,e.position,t,o));return{tilesInnerRing:i,tilesMiddleRing:r,tilesOuterRing:l}},J=(o,e)=>{e.strokeWeight(2),e.stroke([0,0,0,.5]),e.fill(`hsb(${o.colorHue}, 50%, 60%)`);const[t,i,r,l,c,a]=o.vertices;e.beginShape(),e.vertex(t.x,t.y),e.vertex(i.x,i.y),e.quadraticVertex(r.x,r.y,l.x,l.y),e.vertex(l.x,l.y),e.vertex(c.x,c.y),e.quadraticVertex(a.x,a.y,t.x,t.y),e.endShape(),e.noStroke(),e.fill(0),e.textSize(13),e.text(o.label,o.center.x-e.textWidth(o.label)/2,o.center.y)},ut=(o,e,t,i,r)=>{const l=[e[_(o-1,e.length)],e[_(o,e.length)],e[_(o+1,e.length)],t[_(2*o-1,t.length)],t[_(2*o,t.length)],t[_(2*o+1,t.length)],i[_(o,i.length)]];for(const c of l){r.strokeWeight(3),r.stroke([0,0,0,1]),r.fill(`hsb(${c.colorHue}, 60%, 90%)`);const[a,x,s,f,n,g]=c.vertices;r.beginShape(),r.vertex(a.x,a.y),r.vertex(x.x,x.y),r.quadraticVertex(s.x,s.y,f.x,f.y),r.vertex(f.x,f.y),r.vertex(n.x,n.y),r.quadraticVertex(g.x,g.y,a.x,a.y),r.endShape(),r.noStroke(),r.fill(0),r.textSize(13),r.textStyle(r.BOLD),r.text(c.label,c.center.x-r.textWidth(c.label)/2,c.center.y),r.textStyle(r.NORMAL)}},xt=(o,e,t)=>{const{scale:i}=e;t.textSize(10),t.push(),t.rotate(o*(2*t.PI/12)),t.fill(250),t.circle(0,0,e.innerRing.innerDiameter*2*i),t.fill(0);const r=t.createVector();r.x=0,r.y=-e.innerRing.innerDiameter*i;const l="▲";t.text(l,r.x-t.textWidth(l)/2,r.y*.9);const c="Key";t.text(c,r.x-t.textWidth(c)/2,r.y*.75);const a=t.createVector(),x=["♯","♯♯","♯♯♯","♯♯♯♯","7♭/5♯","6♭/6♯","5♭/7♯","♭♭♭♭","♭♭♭","♭♭","♭"];a.y=-e.innerRing.innerDiameter*.85*i,t.push();for(const F of x)t.rotate(2*t.PI/12),t.text(F,-t.textWidth(F)/2,a.y);t.pop();const s=t.createVector();s.y=-e.innerRing.innerDiameter*1.04*i;const f="I";t.text(f,s.x-t.textWidth(f)/2,s.y);const n=t.createVector();n.y=-e.innerRing.outerDiameter*.9*i;const g="maj7,maj9";t.text(g,n.x-t.textWidth(g)/2,n.y),t.push(),t.rotate(-(2*t.PI)/12);const d="IV";t.text(d,s.x-t.textWidth(d)/2,s.y);const h="maj7,maj9";t.text(h,n.x-t.textWidth(h)/2,n.y),t.pop(),t.push(),t.rotate(2*t.PI/12);const W="V";t.text(W,s.x-t.textWidth(W)/2,s.y);const D="7,9,11,sus4,13";t.text(D,n.x-t.textWidth(D)/2,n.y),t.pop(),s.y=-e.middleRing.innerDiameter*1.02*i,n.y=-e.middleRing.outerDiameter*.95*i;const M="III";t.text(M,s.x-t.textWidth(M)/2,s.y);const C="m7";t.text(C,n.x-t.textWidth(C)/2,n.y),t.push(),t.rotate(-(2*t.PI)/24);const $="II";t.text($,s.x-t.textWidth($)/2,s.y);const T="m7,m9";t.text(T,n.x-t.textWidth(T)/2,n.y),t.pop(),t.push();const v="V I";t.rotate(2*t.PI/24),t.text(v,s.x-t.textWidth(v)/2,s.y);const z="m7,m9";t.text(z,n.x-t.textWidth(z)/2,n.y),t.pop();const P="V II°";s.y=-e.outerRing.innerDiameter*1.015*i,n.y=-e.outerRing.outerDiameter*.96*i,t.text(P,s.x-t.textWidth(P)/2,s.y);const k="m7♭5";t.text(k,n.x-t.textWidth(k)/2,n.y)},Z=(o,e)=>{if(e){o.position--,o.innerRing.labels.unshift(o.innerRing.labels.pop()),o.middleRing.labels.unshift(o.middleRing.labels.pop()),o.middleRing.labels.unshift(o.middleRing.labels.pop()),o.outerRing.labels.unshift(o.outerRing.labels.pop());return}o.position++,o.innerRing.labels.push(o.innerRing.labels.shift()),o.middleRing.labels.push(o.middleRing.labels.shift()),o.middleRing.labels.push(o.middleRing.labels.shift()),o.outerRing.labels.push(o.outerRing.labels.shift())};function ft(o){let e,t="Chord wheel",i,r,l,c,a,x,s,f,n,g,d,h,W,D,M,C,$="On mobile you can also swipe left and right to rotate the shape",T,v,z=`This page is an implementation of <a href="https://chordwheel.com/" target="_blank" rel="noopener noreferrer">Jim Fleser&#39;s Chord Wheel</a>
    it is intended for my personal use. If you are using this implementation you should definitely
    <a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=16&amp;Itemid=4" target="_blank" rel="noopener noreferrer">buy his book</a> or
    <a href="https://apps.apple.com/us/app/the-chord-wheel/id444931977" target="_blank" rel="noopener noreferrer">buy his app</a> (which is much more complete than this page).`,P,k,F=`This tool only works for songs in major keys. 
    <ul><li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=5&amp;Itemid=17" target="_blank" rel="noopener noreferrer">Analyzing songs and compositional styles</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=8:soloing-and-improvisation&amp;catid=8:using-the-chordwheel&amp;Itemid=8" target="_blank" rel="noopener noreferrer">Soloing and improvisation</a></li> <li><a href="https://chordwheel.com/index.php?option=com_content&amp;view=article&amp;id=9&amp;Itemid=5" target="_blank" rel="noopener noreferrer">Transpositions</a></li></ul>`,H,q,K;return l=new dt({props:{sketch:o[3]}}),{c(){e=b("h3"),e.textContent=t,i=A(),r=b("div"),rt(l.$$.fragment),c=A(),a=b("div"),x=b("p"),s=b("button"),f=Q(`
        Shape rotation
        `),n=b("button"),g=A(),d=b("p"),h=b("button"),W=Q(`
        Wheel rotation
        `),D=b("button"),M=A(),C=b("p"),C.textContent=$,T=A(),v=b("div"),v.innerHTML=z,P=A(),k=b("div"),k.innerHTML=F,this.h()},l(m){e=R(m,"H3",{"data-svelte-h":!0}),j(e)!=="svelte-11nfyxx"&&(e.textContent=t),i=O(m),r=R(m,"DIV",{class:!0});var y=S(r);it(l.$$.fragment,y),y.forEach(u),c=O(m),a=R(m,"DIV",{class:!0});var p=S(a);x=R(p,"P",{});var L=S(x);s=R(L,"BUTTON",{class:!0}),S(s).forEach(u),f=Y(L,`
        Shape rotation
        `),n=R(L,"BUTTON",{class:!0}),S(n).forEach(u),L.forEach(u),g=O(p),d=R(p,"P",{});var G=S(d);h=R(G,"BUTTON",{class:!0}),S(h).forEach(u),W=Y(G,`
        Wheel rotation
        `),D=R(G,"BUTTON",{class:!0}),S(D).forEach(u),G.forEach(u),M=O(p),C=R(p,"P",{"data-svelte-h":!0}),j(C)!=="svelte-1fnnkzf"&&(C.textContent=$),p.forEach(u),T=O(m),v=R(m,"DIV",{"data-svelte-h":!0}),j(v)!=="svelte-1do95hk"&&(v.innerHTML=z),P=O(m),k=R(m,"DIV",{"data-svelte-h":!0}),j(k)!=="svelte-gtbrys"&&(k.innerHTML=F),this.h()},h(){B(r,"class","d-flex justify-content-center svelte-1vtu5u7"),B(s,"class","fa fa-undo"),B(n,"class","fa fa-repeat"),B(h,"class","fa fa-undo"),B(D,"class","fa fa-repeat"),B(a,"class","justify-content-center svelte-1vtu5u7")},m(m,y){V(m,e,y),V(m,i,y),V(m,r,y),st(l,r,null),V(m,c,y),V(m,a,y),I(a,x),I(x,s),I(x,f),I(x,n),I(a,g),I(a,d),I(d,h),I(d,W),I(d,D),I(a,M),I(a,C),V(m,T,y),V(m,v,y),V(m,P,y),V(m,k,y),H=!0,q||(K=[N(s,"click",o[4]),N(n,"click",o[5]),N(h,"click",o[2]),N(D,"click",o[1])],q=!0)},p:et,i(m){H||(at(l.$$.fragment,m),H=!0)},o(m){lt(l.$$.fragment,m),H=!1},d(m){m&&(u(e),u(i),u(r),u(c),u(a),u(T),u(v),u(P),u(k)),ct(l),q=!1,mt(K)}}}function gt(o,e,t){let i,r,l=0;const c=()=>{Z(E,!0),r=X(i,E)},a=()=>{Z(E,!1),r=X(i,E)},x=n=>{function g(){const h=Math.min(n.windowWidth,n.windowHeight);n.resizeCanvas(h*.8,h*.8),E.scale=h/2*.75,r=X(n,E)}n.setup=()=>{i=n,n.createCanvas(100,100),g(),n.colorMode(n.HSB)},n.draw=()=>{n.background(50),n.translate(n.width/2,n.height/2),r.tilesInnerRing.forEach(h=>J(h,n)),r.tilesMiddleRing.forEach(h=>J(h,n)),r.tilesOuterRing.forEach(h=>J(h,n)),ut(l,r.tilesInnerRing,r.tilesMiddleRing,r.tilesOuterRing,n),xt(l,E,n)},n.keyPressed=()=>{n.keyCode===n.LEFT_ARROW&&t(0,l=_(l-1,r.tilesInnerRing.length)),n.keyCode===n.RIGHT_ARROW&&t(0,l=_(l+1,r.tilesInnerRing.length)),n.keyCode===n.UP_ARROW&&a(),n.keyCode===n.DOWN_ARROW&&c()};let d;n.touchStarted=h=>{d=n.mouseX},n.touchEnded=h=>{if(!d||Math.abs(n.mouseX-d)<100)return;n.mouseX>d?t(0,l=_(l+1,r.tilesInnerRing.length)):t(0,l=_(l-1,r.tilesInnerRing.length))},n.windowResized=()=>{g()}};return ht(()=>{i==null||i.remove()}),[l,c,a,x,()=>t(0,l-=1),()=>t(0,l+=1)]}class yt extends nt{constructor(e){super(),ot(this,e,gt,ft,tt,{})}}function bt(o){let e,t;return e=new yt({}),{c(){rt(e.$$.fragment)},l(i){it(e.$$.fragment,i)},m(i,r){st(e,i,r),t=!0},p:et,i(i){t||(at(e.$$.fragment,i),t=!0)},o(i){lt(e.$$.fragment,i),t=!1},d(i){ct(e,i)}}}class vt extends nt{constructor(e){super(),ot(this,e,null,bt,tt,{})}}export{vt as component};
