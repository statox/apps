import{Y as x,Z as v,_ as h,$ as w,a0 as r}from"./scheduler.2091c757.js";import{g as B,t as C,c as E,a as L}from"./index.91be552e.js";import{w as k}from"./index.170db9b1.js";function q(t,e){const c=e.token={};function s(l,a,g,p){if(e.token!==c)return;e.resolved=p;let o=e.ctx;g!==void 0&&(o=o.slice(),o[g]=p);const n=l&&(e.current=l)(o);let f=!1;e.block&&(e.blocks?e.blocks.forEach((b,m)=>{m!==a&&b&&(B(),C(b,1,1,()=>{e.blocks[m]===b&&(e.blocks[m]=null)}),E())}):e.block.d(1),n.c(),L(n,1),n.m(e.mount(),e.anchor),f=!0),e.block=n,e.blocks&&(e.blocks[a]=n),f&&w()}if(x(t)){const l=v();if(t.then(a=>{h(l),s(e.then,1,e.value,a),h(null)},a=>{if(h(l),s(e.catch,2,e.error,a),h(null),!e.hasCatch)throw a}),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}}function z(t,e,c){const s=e.slice(),{resolved:l}=t;t.current===t.then&&(s[t.value]=l),t.current===t.catch&&(s[t.error]=l),t.block.p(s,c)}const _=k(!1),d=k(null),u=k([]),i=k(null);function M(t=1){var s,l;const e=r(u).length,c=r(u)[e-1];return r(d)||(s=c==null?void 0:c.callbacks)!=null&&s.onBeforeClose&&((l=c==null?void 0:c.callbacks)==null?void 0:l.onBeforeClose())===!1?!1:(r(_)&&e>0&&d.set(!0),_.set(!1),i.set("pop"),Y(t),!0)}function A(){return M(1)}function D(t,e,c){r(d)||(i.set("push"),r(_)&&r(u).length&&d.set(!0),_.set(!1),c!=null&&c.replace?u.update(s=>[...s.slice(0,s.length-1),{component:t,props:e}]):u.update(s=>[...s,{component:t,props:e}]))}function Y(t=1){u.update(e=>e.slice(0,Math.max(0,e.length-t)))}export{A as c,_ as e,q as h,u as m,D as o,d as t,z as u};
